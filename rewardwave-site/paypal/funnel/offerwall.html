 <!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Claim Your Reward | Complete Offers</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <style>
        :root {
            --primary-color: #ff7b7b;
            --secondary-color: #ff5984;
            --bg-gradient-start: #fff9f9;
            --bg-gradient-end: #fff0f0;
            --headline-gradient-start: #ff7b7b;
            --headline-gradient-end: #ff5984;
            --button-gradient-start: #2ed817;
            --button-gradient-end: #2ed817;
        }

        body.theme-bloxfruits {
            --primary-color: #41b883;
            --secondary-color: #35495e;
            --bg-gradient-start: #f2f9f5;
            --bg-gradient-end: #e8f5ee;
            --headline-gradient-start: #41b883;
            --headline-gradient-end: #35495e;
            --button-gradient-start: #41b883;
            --button-gradient-end: #35495e;
        }

        body.theme-fortnite {
            --primary-color: #9d4dbb;
            --secondary-color: #5d3b87;
            --bg-gradient-start: #f8f6fb;
            --bg-gradient-end: #f0eaf8;
            --headline-gradient-start: #9d4dbb;
            --headline-gradient-end: #5d3b87;
            --button-gradient-start: #9d4dbb;
            --button-gradient-end: #5d3b87;
        }

        body.theme-victoria {
            --primary-color: #ff85b1;
            --secondary-color: #e53a82;
            --bg-gradient-start: #fff5fa;
            --bg-gradient-end: #ffedf6;
            --headline-gradient-start: #ff85b1;
            --headline-gradient-end: #4ee53a;
            --button-gradient-start: #0bbe1a;
            --button-gradient-end: #40e53a;
        }

        body.theme-zelle {
            --primary-color: #6e2ff5;
            --secondary-color: #5319db;
            --bg-gradient-start: #f5f0ff;
            --bg-gradient-end: #efe5ff;
            --headline-gradient-start: #6e2ff5;
            --headline-gradient-end: #5319db;
            --button-gradient-start: #6e2ff5;
            --button-gradient-end: #5319db;
        }

        body.theme-brandy {
            --primary-color: #c49a6c;
            --secondary-color: #a67c4e;
            --bg-gradient-start: #faf6f0;
            --bg-gradient-end: #f5ede4;
            --headline-gradient-start: #c49a6c;
            --headline-gradient-end: #a67c4e;
            --button-gradient-start: #c49a6c;
            --button-gradient-end: #a67c4e;
        }

        body.theme-steam {
            --primary-color: #1b2838;
            --secondary-color: #2a475e;
            --bg-gradient-start: #f0f3f6;
            --bg-gradient-end: #e5eaef;
            --headline-gradient-start: #1b2838;
            --headline-gradient-end: #2a475e;
            --button-gradient-start: #1b2838;
            --button-gradient-end: #2a475e;
        }

        body.theme-apple {
            --primary-color: #000000;
            --secondary-color: #333333;
            --bg-gradient-start: #f5f5f7;
            --bg-gradient-end: #e5e5e7;
            --headline-gradient-start: #000000;
            --headline-gradient-end: #333333;
            --button-gradient-start: #000000;
            --button-gradient-end: #333333;
        }

        body.theme-ps5 {
            --primary-color: #0070cc;
            --secondary-color: #005bb3;
            --bg-gradient-start: #f0f8ff;
            --bg-gradient-end: #e5f2ff;
            --headline-gradient-start: #0070cc;
            --headline-gradient-end: #005bb3;
            --button-gradient-start: #0070cc;
            --button-gradient-end: #005bb3;
        }

        body.theme-xbox {
            --primary-color: #107c10;
            --secondary-color: #0e6b0e;
            --bg-gradient-start: #f0f9f0;
            --bg-gradient-end: #e5f5e5;
            --headline-gradient-start: #107c10;
            --headline-gradient-end: #0e6b0e;
            --button-gradient-start: #107c10;
            --button-gradient-end: #0e6b0e;
        }

        body.theme-venmo {
            --primary-color: #3d95ce;
            --secondary-color: #2d80b8;
            --bg-gradient-start: #f0f8fc;
            --bg-gradient-end: #e5f1f9;
            --headline-gradient-start: #3d95ce;
            --headline-gradient-end: #2d80b8;
            --button-gradient-start: #3d95ce;
            --button-gradient-end: #2d80b8;
        }

        body.theme-minecoins {
            --primary-color: #4a9e45;
            --secondary-color: #3b8435;
            --bg-gradient-start: #f2f9f2;
            --bg-gradient-end: #e8f5e8;
            --headline-gradient-start: #4a9e45;
            --headline-gradient-end: #3b8435;
            --button-gradient-start: #4a9e45;
            --button-gradient-end: #3b8435;
        }

        body.theme-doordash {
            --primary-color: #ff3008;
            --secondary-color: #e02500;
            --bg-gradient-start: #fff5f0;
            --bg-gradient-end: #ffebe5;
            --headline-gradient-start: #ff3008;
            --headline-gradient-end: #e02500;
            --button-gradient-start: #ff3008;
            --button-gradient-end: #e02500;
        }

        body.theme-netflix {
            --primary-color: #e50914;
            --secondary-color: #b81d24;
            --bg-gradient-start: #fff0f1;
            --bg-gradient-end: #ffe5e6;
            --headline-gradient-start: #e50914;
            --headline-gradient-end: #b81d24;
            --button-gradient-start: #e50914;
            --button-gradient-end: #b81d24;
        }

        body.theme-aldi {
            --primary-color: #00558d;
            --secondary-color: #d41f37;
            --bg-gradient-start: #f0f6fb;
            --bg-gradient-end: #e5eef7;
            --headline-gradient-start: #00558d;
            --headline-gradient-end: #004579;
            --button-gradient-start: #00558d;
            --button-gradient-end: #004579;
        }

        body.theme-marshalls {
            --primary-color: #e60013;
            --secondary-color: #c4000f;
            --bg-gradient-start: #fff0f1;
            --bg-gradient-end: #ffe5e6;
            --headline-gradient-start: #e60013;
            --headline-gradient-end: #c4000f;
            --button-gradient-start: #e60013;
            --button-gradient-end: #c4000f;
        }

        body.theme-crumbl {
            --primary-color: #f5a8bb;
            --secondary-color: #f18da5;
            --bg-gradient-start: #fef5f7;
            --bg-gradient-end: #fcebef;
            --headline-gradient-start: #f5a8bb;
            --headline-gradient-end: #f18da5;
            --button-gradient-start: #f5a8bb;
            --button-gradient-end: #f18da5;
        }

        /* PayPal theme */

        body.theme-paypal {
            --primary-color: #0070ba;
            --secondary-color: #003087;
            --bg-gradient-start: #f5f9ff;
            --bg-gradient-end: #edf6ff;
            --headline-gradient-start: #0070ba;
            --headline-gradient-end: #003087;
            --button-gradient-start: #0070ba;
            --button-gradient-end: #003087;
        }

        /* TikTok theme */

        body.theme-tiktok {
            --primary-color: #fe2c55;
            --secondary-color: #25f4ee;
            --bg-gradient-start: #f8f8f8;
            --bg-gradient-end: #f0f0f0;
            --headline-gradient-start: #fe2c55;
            --headline-gradient-end: #25f4ee;
            --button-gradient-start: #fe2c55;
            --button-gradient-end: #25f4ee;
        }

        /* Amazon theme */

        body.theme-amazon {
            --primary-color: #ff9900;
            --secondary-color: #146eb4;
            --bg-gradient-start: #fffaf4;
            --bg-gradient-end: #fff8e8;
            --headline-gradient-start: #ff9900;
            --headline-gradient-end: #ff7c00;
            --progress-gradient-start: #ff9900;
            --progress-gradient-end: #ff7c00;
        }

        /* Walmart theme */

        body.theme-walmart {
            --primary-color: #0071ce;
            --secondary-color: #ffc220;
            --bg-gradient-start: #f0f7ff;
            --bg-gradient-end: #e8f3ff;
            --headline-gradient-start: #0071ce;
            --headline-gradient-end: #005cb8;
            --progress-gradient-start: #0071ce;
            --progress-gradient-end: #005cb8;
        }

        /* Target theme */

        body.theme-target {
            --primary-color: #cc0000;
            --secondary-color: #fc9090;
            --bg-gradient-start: #fff5f5;
            --bg-gradient-end: #ffecec;
            --headline-gradient-start: #cc0000;
            --headline-gradient-end: #b00000;
            --progress-gradient-start: #cc0000;
            --progress-gradient-end: #b00000;
        }

        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #e4e7eb 100%);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .gift-card-outline {
            position: relative;
            display: inline-block;
            padding: 4px;
            border-radius: 12px;
            border: 2px solid var(--primary-color);
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        .gift-card-outline img {
            border-radius: 8px;
            display: block;
        }

        .headline {
            background: linear-gradient(90deg, var(--headline-gradient-start), var(--headline-gradient-end));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .card {
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
        }

        .offer-card {
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .offer-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            border-color: var(--primary-color);
        }

        .pulse-animation {
            box-shadow: 0 0 0 0 var(--primary-color);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(var(--primary-color-rgb), 0.4);
            }
            70% {
                box-shadow: 0 0 0 10px rgba(var(--primary-color-rgb), 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(var(--primary-color-rgb), 0);
            }
        }

        .bg-purple-100 {
            background-color: var(--bg-gradient-start) !important;
        }

        .bg-purple-500,
        .bg-purple-600 {
            background-color: var(--primary-color) !important;
        }

        .text-purple-500,
        .text-purple-600 {
            color: var(--primary-color) !important;
        }

        .bg-purple-600,
        button.bg-purple-600 {
            background-color: var(--primary-color) !important;
        }

        /* For hover effects */

        .hover\:bg-purple-500:hover {
            background-color: var(--secondary-color) !important;
        }

        .progress-fill {
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
        }

        .progress-bar-container {
            height: 20px;
            background-color: #e2e8f0;
            border-radius: 10px;
            position: relative;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-color), #ff5700);
            border-radius: 10px;
            transition: width 0.5s ease;
        }

        .step-marker {
            position: absolute;
            top: -12px;
            transform: translateX(-50%);
            z-index: 10;
        }

        .step-marker .icon {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            color: white;
            margin-bottom: 5px;
        }

        .step-marker .label {
            font-size: 12px;
            font-weight: 600;
        }

        .step-marker.active .icon,
        .step-marker .icon.bg-green-500 {
            background-color: var(--primary-color) !important;
            color: white !important;
        }

        .text-green-500 {
            color: var(--primary-color) !important;
        }

        .step-marker.active .icon {
            animation: pulse 2s infinite;
            box-shadow: 0 0 0 0 var(--primary-color);
        }

        .countdown-timer {
            font-family: 'Courier New', monospace;
        }

        .btn-gradient {
            background: linear-gradient(90deg, var(--button-gradient-start), var(--button-gradient-end));
            transition: all 0.3s ease;
        }

        .btn-gradient:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }

        .recently-claimed-container {
            margin-top: 20px;
        }

        /* Scroll arrow styles */

        .scroll-arrow {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 50px;
            height: 50px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            z-index: 100;
            cursor: pointer;
            transition: all 0.3s ease;
            animation: bounce 1.5s infinite;
            opacity: 1;
            pointer-events: auto;
        }

        .scroll-arrow.hidden {
            opacity: 0;
            pointer-events: none;
        }

        @keyframes bounce {
            0%,
            20%,
            50%,
            80%,
            100% {
                transform: translateX(-50%) translateY(0);
            }
            40% {
                transform: translateX(-50%) translateY(-10px);
            }
            60% {
                transform: translateX(-50%) translateY(-5px);
            }
        }

        @media (min-width: 1024px) {
            .scroll-arrow {
                display: none;
                /* Hide on desktop */
            }
        }

        .recently-claimed-container .claims-wrapper {
            height: 216px;
            /* Height for 4 items (each ~54px) */
            overflow: hidden;
            position: relative;
        }

        .animate-spin.border-t-2.border-b-2.border-purple-600 {
            border-top-color: var(--primary-color) !important;
            border-bottom-color: var(--primary-color) !important;
        }

        /* Also fix any loading text colors */

        .text-purple-600,
        .text-purple-500 {
            color: var(--primary-color) !important;
        }
    </style>
    <script src="/translation.js"></script>
</head>

<body class="min-h-screen flex flex-col">
    <!-- Scroll Arrow Button -->
    <div id="scroll-arrow" class="scroll-arrow">
        <i class="fas fa-chevron-down"></i>
    </div>

    <!-- Top Bar with Stats -->
    <div class="bg-white py-2 shadow-sm">
        <div class="container mx-auto px-4">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-4">
                    <div class="text-sm flex items-center">
                        <i class="fas fa-user text-green-500 mr-2"></i>
                        <span class="font-medium" id="userEmail">Loading...</span>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="text-sm flex items-center">
                        <i class="fas fa-clock text-red-500 mr-2"></i>
                        <span class="font-medium countdown-timer" id="countdownTimer">23:59:59</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="flex-grow container mx-auto px-4 py-8">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Left Column - Instructions -->
            <div class="lg:col-span-1">
                <div class="bg-white rounded-xl shadow-lg p-6 mb-6 card">
                    <div class="text-center mb-6">
                        <div class="gift-card-outline">
                            <img id="brandLogo" src="" alt="Brand Logo" class="mx-auto h-16">
                        </div>
                        <h1 class="headline text-2xl md:text-3xl font-bold mb-2">$<span id="displayValue">1000</span> <span id="displayType">SHEIN</span> Gift Card</h1>
                        <p class="text-gray-600">Follow the steps below to claim your reward</p>
                    </div>

                    <div class="mb-8">
                        <div class="progress-bar-container mb-8" style="overflow: visible;">
                            <div class="progress-bar" id="progress-bar" style="width: 0%"></div>

                            <!-- Step 1 marker (0%) -->
                            <div class="step-marker active" style="left: 0%">
                                <div class="icon bg-purple-600">
                                    <i class="fas fa-check"></i>
                                </div>
                                <div class="label text-center">Start</div>
                            </div>

                            <!-- Step 2 marker (20%) -->
                            <div class="step-marker" style="left: 20%" id="step-2">
                                <div class="icon bg-gray-400">
                                    <span>2</span>
                                </div>
                                <div class="label text-center">$200</div>
                            </div>

                            <!-- Step 3 marker (50%) -->
                            <div class="step-marker" style="left: 50%" id="step-3">
                                <div class="icon bg-gray-400">
                                    <span>5</span>
                                </div>
                                <div class="label text-center">$500</div>
                            </div>

                            <!-- Step 4 marker (100%) -->
                            <div class="step-marker" style="left: 100%" id="step-4">
                                <div class="icon bg-gray-400">
                                    <span>10</span>
                                </div>
                                <div class="label text-center" id="fullRewardLabel">$1000</div>
                            </div>
                        </div>
                    </div>

                    <div class="space-y-4 mb-6">
                        <div class="flex items-start">
                            <div class="bg-purple-100 rounded-full p-2 mt-1 mr-3">
                                <i class="fas fa-check text-purple-600 text-sm"></i>
                            </div>
                            <div>
                                <h3 class="font-medium">Complete 2 offers</h3>
                                <p class="text-sm text-gray-600">Get $200 reward instantly</p>
                            </div>
                        </div>

                        <div class="flex items-start">
                            <div class="bg-purple-100 rounded-full p-2 mt-1 mr-3">
                                <i class="fas fa-check text-purple-600 text-sm"></i>
                            </div>
                            <div>
                                <h3 class="font-medium">Complete 5 offers</h3>
                                <p class="text-sm text-gray-600">Get $500 reward instantly</p>
                            </div>
                        </div>

                        <div class="flex items-start">
                            <div class="bg-purple-100 rounded-full p-2 mt-1 mr-3">
                                <i class="fas fa-check text-purple-600 text-sm"></i>
                            </div>
                            <div>
                                <h3 class="font-medium">Complete 10 offers</h3>
                                <p class="text-sm text-gray-600">Get your full $<span id="rewardValue">1000</span> <span id="rewardType">SHEIN</span> gift card</p>
                            </div>
                        </div>
                    </div>

                    <div>
                        <button
  id="claim-reward-btn"
  class="w-full btn-gradient text-white font-medium py-3 px-4 rounded-lg flex items-center justify-center"
  onclick="_Yg()">
  <span>CLAIM YOUR REWARD</span>
  <i class="fas fa-gift ml-2"></i>
</button>


                        <p class="text-xs text-gray-500 mt-3 text-center">
                            Complete the required number of offers to unlock your reward
                        </p>
                    </div>
                </div>
            </div>

            

                <div class="bg-white rounded-xl shadow-lg p-6 card">
                    <h3 class="font-bold text-lg mb-4">Frequently Asked Questions</h3>

                    <div class="space-y-4">
                        <div>
                            <h4 class="font-medium mb-1">How do I redeem my gift card?</h4>
                            <p class="text-sm text-gray-600">Once you've completed 10 offers, you'll receive your gift card code by email within 24-48 hours after verification.</p>
                        </div>

                        <div>
                            <h4 class="font-medium mb-1">What if an offer doesn't track?</h4>
                            <p class="text-sm text-gray-600">Most offers track within 5-10 minutes. If after 30 minutes your offer hasn't tracked, please contact support.</p>
                        </div>

                        <div>
                            <h4 class="font-medium mb-1">Can I complete offers on mobile?</h4>
                            <p class="text-sm text-gray-600">Yes! Most offers work on both desktop and mobile. Some offers are device-specific and will be labeled accordingly.</p>
                        </div>

                        <div>
                            <h4 class="font-medium mb-1">How long do I have to complete the offers?</h4>
                            <p class="text-sm text-gray-600">We recommend completing offers as soon as possible. The timer at the top indicates how long you have to complete your session.</p>
                        </div>
                    </div>
                </div>

                <!-- Recently Claimed (moved to bottom) -->
                <div class="bg-white rounded-xl shadow-lg p-6 card recently-claimed-container">
                    <h3 class="font-bold text-lg mb-4">Recently Claimed</h3>

                    <!-- This empty div will be populated by JavaScript -->
                    <div id="recently-claimed-container" class="claims-wrapper" data-no-translate="true">
                        <!-- Dynamic content will be added here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <div class="bg-gray-100 py-4 mt-8">
        <div class="container mx-auto px-4">
            <div class="text-center text-xs text-gray-500">
                <p>This offer is not sponsored or endorsed by any brand. All trademarks belong to their respective owners.</p>
                <p class="mt-1">© 2025 Reward Wave. All rights reserved.</p>
            </div>
        </div>
    </div>

    <!-- Offer Completion Modal -->
    <div id="completion-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-xl p-6 max-w-md w-full mx-4">
            <div class="text-center mb-6">
                <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-check-circle text-green-500 text-3xl"></i>
                </div>
                <h3 class="text-xl font-bold">Offer Completed!</h3>
                <p class="text-gray-600">Your progress has been updated</p>
            </div>

            <div class="bg-gray-100 rounded-lg p-4 mb-6">
                <div class="flex justify-between">
                    <span class="font-medium">Current progress:</span>
                    <span class="text-purple-600 font-bold" id="modal-progress-text">1/10 Offers</span>
                </div>
                <div class="mt-2">
                    <div class="h-2 bg-gray-300 rounded-full">
                        <div class="h-2 bg-purple-600 rounded-full" id="modal-progress-bar" style="width: 10%"></div>
                    </div>
                </div>
            </div>

            <div class="text-center">
                <button id="modal-close-btn" class="px-6 py-2 bg-purple-600 text-white rounded-lg">
                    Continue
                </button>
            </div>
        </div>
    </div>

    <!-- Reward Claim Modal -->
    <div id="reward-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-xl p-6 max-w-md w-full mx-4">
            <div class="text-center mb-6">
                <div class="w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-gift text-purple-500 text-3xl"></i>
                </div>
                <h3 class="text-xl font-bold">Congratulations!</h3>
                <p id="reward-message" class="text-gray-600">You've earned your $200 reward!</p>
            </div>

            <div class="bg-gray-100 rounded-lg p-4 mb-6">
                <p class="text-center">
                    We'll send your reward details to:<br/>
                    <span id="reward-email" class="font-medium"></span>
                </p>
            </div>

            <div class="space-y-4">
                <div id="continue-offers-container">
                    <p class="text-sm text-center mb-2">
                        Complete more offers to get even bigger rewards!
                    </p>
                    <button id="continue-offers-btn" class="w-full px-6 py-2 bg-purple-600 text-white rounded-lg">
                        Continue to Earn More
                    </button>
                </div>

                <button id="reward-close-btn" class="w-full px-6 py-2 border border-gray-300 text-gray-700 rounded-lg">
                    Close
                </button>
            </div>
        </div>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script>
        function decodeHtmlEntities() {
            // More comprehensive mapping of HTML entities to their symbols
            const entitiesToReplace = {
                '&#36;': '$', // Dollar sign
                '&#163;': '£', // Pound sign
                '&#8364;': '€', // Euro sign
                '&#165;': '¥', // Yen sign
                '&#8356;': '£' // Alternative pound sign encoding
            };

            // Ensure immediate replacement in all text and attribute content
            function replaceEntitiesRecursively(node) {
                // Handle text nodes
                if (node.nodeType === Node.TEXT_NODE) {
                    let text = node.textContent;
                    let replaced = false;

                    // Replace all known entities
                    Object.entries(entitiesToReplace).forEach(([entity, symbol]) => {
                        if (text.includes(entity)) {
                            text = text.replace(new RegExp(entity, 'g'), symbol);
                            replaced = true;
                        }
                    });

                    if (replaced) {
                        node.textContent = text;
                    }
                }
                // Handle element nodes
                else if (node.nodeType === Node.ELEMENT_NODE && node.tagName.toLowerCase() !== 'script') {
                    // Check and replace in attributes
                    if (node.attributes) {
                        Array.from(node.attributes).forEach(attr => {
                            let value = attr.value;
                            Object.entries(entitiesToReplace).forEach(([entity, symbol]) => {
                                if (value.includes(entity)) {
                                    attr.value = value.replace(new RegExp(entity, 'g'), symbol);
                                }
                            });
                        });
                    }

                    // Recursively process child nodes
                    if (node.childNodes) {
                        node.childNodes.forEach(replaceEntitiesRecursively);
                    }
                }
            }

            // Start replacement from the body
            replaceEntitiesRecursively(document.body);

            // Ensure no persistent replacement intervals
            if (window.entityDecodeInterval) {
                clearInterval(window.entityDecodeInterval);
            }
        }

        // Attach to DOMContentLoaded to ensure all content is available
        document.addEventListener('DOMContentLoaded', function() {
            // Run immediately
            decodeHtmlEntities();

            // Additional pass after a short delay to catch any late-loading content
            setTimeout(decodeHtmlEntities, 1);
        });

        // Prevent multiple executions and periodic checks
        window.decodeHtmlEntities = decodeHtmlEntities;

        // TikTok Detection with Cloaker Support
        function detectTikTokReferrer() {
            // First log the URL for debugging
            console.log("Current URL:", window.location.href);

            // Check URL parameters first (this works with cloakers)
            const urlParams = new URLSearchParams(window.location.search);

            // Debug: Log all URL parameters
            console.log("All URL parameters:");
            for (const [key, value] of urlParams.entries()) {
                console.log(`  ${key}: ${value}`);
            }

            // Check for our custom "stealth" parameters that cloakers can use
            const source = urlParams.get('source') || '';
            const ref = urlParams.get('ref') || '';
            const platform = urlParams.get('platform') || '';
            const t = urlParams.get('t') || '';

            console.log("TikTok detection parameters:");
            console.log(`  t: '${t}'`);
            console.log(`  source: '${source}'`);
            console.log(`  ref: '${ref}'`);
            console.log(`  platform: '${platform}'`);

            // Any of these parameter combinations would indicate TikTok traffic
            const hasTikTokParam =
                urlParams.has('tt') ||
                urlParams.has('ttclid') ||
                source.toLowerCase() === 't' ||
                ref.toLowerCase() === 'tt' ||
                platform.toLowerCase() === 'tt' ||
                t === '1';

            // Standard UTM parameter check
            const utmSource = urlParams.get('utm_source') || '';
            const utmMedium = urlParams.get('utm_medium') || '';
            const utmCampaign = urlParams.get('utm_campaign') || '';

            // Direct referrer check (works without cloaker)
            const referrer = document.referrer || "";
            const isTikTokReferrer = referrer.toLowerCase().includes('tiktok.com');

            console.log("Referrer:", referrer);

            // IMPORTANT CHANGE: Only use the current URL parameters and referrer to detect TikTok
            // This prevents persistence between page loads when parameters are removed
            const isFromTikTok =
                isTikTokReferrer ||
                utmSource.toLowerCase() === 'tiktok' ||
                utmMedium.toLowerCase() === 'tiktok' ||
                utmCampaign.toLowerCase().includes('tik') ||
                hasTikTokParam;

            // Log the detection result with reason
            if (isFromTikTok) {
                let reasons = [];
                if (isTikTokReferrer) reasons.push("TikTok referrer");
                if (hasTikTokParam) {
                    if (t === '1') reasons.push("t=1 parameter");
                    if (source.toLowerCase() === 't') reasons.push("source=t parameter");
                    if (ref.toLowerCase() === 'tt') reasons.push("ref=tt parameter");
                    if (platform.toLowerCase() === 'tt') reasons.push("platform=tt parameter");
                    if (urlParams.has('tt')) reasons.push("tt parameter");
                    if (urlParams.has('ttclid')) reasons.push("ttclid parameter");
                }
                if (utmSource.toLowerCase() === 'tiktok') reasons.push("utm_source=tiktok");
                if (utmMedium.toLowerCase() === 'tiktok') reasons.push("utm_medium=tiktok");
                if (utmCampaign.toLowerCase().includes('tik')) reasons.push("utm_campaign contains 'tik'");

                console.log("User detected as coming from TikTok:", reasons.join(", "));

                // Still store in sessionStorage in case you want persistence in the future
                sessionStorage.setItem('fromTikTok', 'true');
                sessionStorage.setItem('fromTikTokReason', reasons.join(", "));
            } else {
                console.log("User not detected as coming from TikTok through URL parameters or referrer");

                // IMPORTANT: Clear the sessionStorage when not detected
                // This ensures that if parameters are removed, detection is reset
                sessionStorage.removeItem('fromTikTok');
                sessionStorage.removeItem('fromTikTokReason');
            }

            // IMPORTANT CHANGE: Only return the current detection, not stored detection
            return isFromTikTok;
        }

        // Store the detection result so it can be sent with API requests
        const isFromTikTok = detectTikTokReferrer();
        console.log("TikTok referrer detected:", isFromTikTok);

        // Modified fetchOffers function
        window.fetchOffers = async function(forceRefresh = false) {
            const offersContainer = document.getElementById('offers-container');

            // Don't reload if we're already loading
            if (window.isLoading) return;

            // Use cached offers unless force refresh is requested
            if (window.cachedOffers && window.cachedOffers.length > 0 && !forceRefresh) {
                displayOffers(window.cachedOffers);
                return;
            }

            window.isLoading = true;

            // Extract referrer ID (s1) and sub ID (s2) from URL parameters
            const urlParams = new URLSearchParams(window.location.search);
            window.referrerId = urlParams.get('s1') || '';
            window.subId = urlParams.get('s2') || '';
            window.funnelType = urlParams.get('type') || 'paypal';

            console.log("URL parameters extracted - s1:", window.referrerId, "s2:", window.subId, "type:", window.funnelType);

            // Show loading UI
            if (!window.cachedOffers || window.cachedOffers.length === 0 || forceRefresh) {
                offersContainer.innerHTML = `
            <div class="text-center py-10 col-span-full">
                <div class="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-purple-600 mx-auto mb-4"></div>
                <p class="text-gray-500">Loading offers for your region...</p>
            </div>
        `;
            }

            try {
                // Try to get user's IP (this could be replaced with a public IP service)
                let userIp = null;
                try {
                    const ipResponse = await fetch('https://api.ipify.org?format=json');
                    const ipData = await ipResponse.json();
                    userIp = ipData.ip;
                    console.log("Using IP for offer targeting:", userIp);
                } catch (ipError) {
                    console.error("Could not detect IP:", ipError);
                }

                // Get TikTok detection status
                const isFromTikTok = detectTikTokReferrer();
                console.log("TikTok referrer detected:", isFromTikTok);

                // API key and user ID (as provided in documentation)
                const apiKey = '91ee684e8dd78898ba2e72a73a8b423e';
                const userId = '701853';

                // Build the URL with all necessary parameters
                let apiUrl = `https://d2jgih9urxpa47.cloudfront.net/public/offers/feed.php?user_id=${userId}&api_key=${apiKey}`;

                // Add optional parameters if available
                if (window.referrerId) apiUrl += `&s1=${encodeURIComponent(window.referrerId)}`;
                if (window.subId) apiUrl += `&s2=${encodeURIComponent(window.subId)}`;
                if (userIp) apiUrl += `&ip=${encodeURIComponent(userIp)}`;

                // Add user agent for device targeting
                apiUrl += `&user_agent=${encodeURIComponent(navigator.userAgent)}`;

                // Add callback for JSONP
                apiUrl += '&callback=?';

                console.log("Fetching offers directly from provider API:", apiUrl);

                // Use jQuery's JSONP method as shown in the documentation
                $.getJSON(apiUrl, function(data) {
                    console.log(`Received ${data.length || 0} offers from API`);

                    if (Array.isArray(data) && data.length > 0) {
                        // Log all offer names for debugging
                        console.log("Offers received from API:");
                        data.forEach((offer, index) => {
                            console.log(`${index+1}. ${offer.name || 'Unnamed offer'}`);
                        });

                        // Filter out unwanted offers (as in the original code)
                        // Initialize terms to filter (case-insensitive for better matching)
                        const filteredTerms = [
                            'rewards us',
                            'rewards uk',
                            'rewards ca',
                            'rewards au'
                        ];

                        // Add TikTok to filtered terms if user is from TikTok
                        if (isFromTikTok) {
                            filteredTerms.push('tiktok');
                            console.log('Adding TikTok to filtered terms since user came from TikTok');
                        }

                        // Store original offers count for logging
                        const originalCount = data.length;

                        // Filter the offers - CASE INSENSITIVE
                        let filteredData = data.filter(offer => {
                            // Make sure we have a valid name to check
                            if (!offer.name || typeof offer.name !== 'string') return true;

                            // Convert offer name to lowercase for case-insensitive matching
                            const lowerOfferName = offer.name.toLowerCase();

                            // Check if the offer name starts with any of the filtered terms
                            for (const term of filteredTerms) {
                                if (lowerOfferName.startsWith(term)) {
                                    console.log(`Filtered out offer: ${offer.name} (matched ${term})`);
                                    return false;
                                }
                            }

                            // Keep this offer
                            return true;
                        });

                        console.log(`Filtered offers: ${originalCount} → ${filteredData.length} (removed ${originalCount - filteredData.length} offers)`);

                        // Take at most 10 offers
                        if (filteredData.length > 10) {
                            console.log(`Trimming to 10 offers from ${filteredData.length}`);
                            filteredData = filteredData.slice(0, 10);
                        }

                        // Store in the global cache
                        window.cachedOffers = filteredData;

                        // Display the filtered offers
                        displayOffers(window.cachedOffers);
                    } else {
                        // Handle no offers case
                        offersContainer.innerHTML = `
                    <div class="text-center py-10 col-span-full">
                        <div class="w-16 h-16 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-exclamation-circle text-gray-400 text-2xl"></i>
                        </div>
                        <p class="text-gray-500">No offers available for your region at the moment. Please check back later.</p>
                        <button class="mt-4 px-6 py-2 bg-purple-600 text-white rounded-lg" onclick="fetchOffers(true)">
                            Try Again
                        </button>
                    </div>
                `;
                    }

                    window.isLoading = false;
                }).fail(function(error) {
                    console.error('Error fetching offers:', error);

                    if (!window.cachedOffers || window.cachedOffers.length === 0) {
                        offersContainer.innerHTML = `
                    <div class="text-center py-10 col-span-full">
                        <div class="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-exclamation-triangle text-red-500 text-2xl"></i>
                        </div>
                        <p class="text-gray-500">Failed to load offers. Please refresh the page.</p>
                        <button class="mt-4 px-6 py-2 bg-purple-600 text-white rounded-lg" onclick="fetchOffers(true)">
                            Retry
                        </button>
                    </div>
                `;
                    }

                    window.isLoading = false;
                });
            } catch (error) {
                console.error('Error in fetchOffers:', error);

                if (!window.cachedOffers || window.cachedOffers.length === 0) {
                    offersContainer.innerHTML = `
                <div class="text-center py-10 col-span-full">
                    <div class="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-exclamation-triangle text-red-500 text-2xl"></i>
                    </div>
                    <p class="text-gray-500">Failed to load offers. Please refresh the page.</p>
                    <button class="mt-4 px-6 py-2 bg-purple-600 text-white rounded-lg" onclick="fetchOffers(true)">
                        Retry
                    </button>
                </div>
            `;
                }

                window.isLoading = false;
            }
        };

        // Parse URL parameters
        function getUrlParam(param) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(param);
        }

        // Get funnel type and value from URL
        const email = getUrlParam('email') || 'Paypal@t.com';
        const funnelType = getUrlParam('type') || 'paypal';
        const funnelValue = getUrlParam('value') || '1000';
        const referrerId = getUrlParam('s1') || '';
        const subId = getUrlParam('s2') || '';

        // Global variables
        let cachedOffers = [];
        let completedOffers = 0;
        let isLoading = false;
        let leadCheckInProgress = false;
        let hasScrolledToOffers = false; // Track if user has scrolled to offers

        function handleScrollArrow() {
            const scrollArrow = document.getElementById('scroll-arrow');
            const offersSection = document.getElementById('offers-section');

            if (!scrollArrow || !offersSection) return;

            // Track scroll state
            let hasScrolledToOffers = false;

            // Initially show the arrow
            scrollArrow.classList.remove('hidden');

            // Check if the offers section is fully visible - using a more forgiving threshold
            const checkVisibility = () => {
                // Get the bounding rectangle of the offers section
                const offersSectionRect = offersSection.getBoundingClientRect();

                // Consider offers visible when at least the top 400px is in view
                // This is more forgiving than the original 150px threshold
                const isOffersVisible = offersSectionRect.top < window.innerHeight - 400;

                if (isOffersVisible) {
                    scrollArrow.classList.add('hidden');
                    hasScrolledToOffers = true;
                } else if (!hasScrolledToOffers) {
                    scrollArrow.classList.remove('hidden');
                }
            };

            // Check visibility on load with a safe delay
            setTimeout(checkVisibility, 1000);

            // Also check visibility after all images have loaded
            window.addEventListener('load', checkVisibility);

            // Handle scroll events with throttling for performance
            let scrollTimeout;
            window.addEventListener('scroll', function() {
                if (scrollTimeout) clearTimeout(scrollTimeout);
                scrollTimeout = setTimeout(checkVisibility, 100);
            });

            // Make sure arrow scrolls to offers when clicked
            scrollArrow.addEventListener('click', function() {
                // Scroll to the offers section with offset to make more of it visible
                const offset = 50;
                const top = offersSection.getBoundingClientRect().top + window.pageYOffset - offset;
                window.scrollTo({
                    top: top,
                    behavior: 'smooth'
                });
            });
        }

        function animateCounter(targetElement, finalValue, duration = 1500) {
            const element = document.getElementById(targetElement);
            if (!element) return;

            let startTime;
            const startValue = 0;

            function updateCounter(timestamp) {
                if (!startTime) startTime = timestamp;

                const progress = Math.min((timestamp - startTime) / duration, 1);
                const easedProgress = 1 - Math.pow(1 - progress, 3); // Cubic ease-out
                const currentValue = Math.floor(startValue + (finalValue - startValue) * easedProgress);

                element.textContent = currentValue;

                if (progress < 1) {
                    requestAnimationFrame(updateCounter);
                }
            }

            requestAnimationFrame(updateCounter);
        }

        function addRGBVariables() {
            // Extract RGB values from hex colors for animations
            const primaryColor = getComputedStyle(document.body).getPropertyValue('--primary-color').trim();
            const secondaryColor = getComputedStyle(document.body).getPropertyValue('--secondary-color').trim();

            // Convert hex to RGB
            function hexToRgb(hex) {
                // Remove # if present
                hex = hex.replace('#', '');

                // Parse hex values
                const r = parseInt(hex.substring(0, 2), 16);
                const g = parseInt(hex.substring(2, 4), 16);
                const b = parseInt(hex.substring(4, 6), 16);

                return `${r}, ${g}, ${b}`;
            }

            // Add RGB variables to body
            document.body.style.setProperty('--primary-color-rgb', hexToRgb(primaryColor));
            document.body.style.setProperty('--secondary-color-rgb', hexToRgb(secondaryColor));
        }

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                const value = parseInt(getUrlParam('value') || '1000');
                // Update all elements that show the value
                animateCounter('displayValue', value);
                animateCounter('rewardValue', value);
                // Add any other elements that show the value
            }, 500);

            const funnelType = getUrlParam('type') || 'paypal';
            document.body.classList.add(`theme-${funnelType.toLowerCase()}`);

            // Scroll arrow functionality
            const scrollArrow = document.getElementById('scroll-arrow');
            const offersSection = document.getElementById('offers-section');

            // Show scroll arrow on load for mobile (hidden on desktop via CSS)
            scrollArrow.addEventListener('click', function() {
                // Smooth scroll to the offers section
                offersSection.scrollIntoView({
                    behavior: 'smooth'
                });
            });

            // Listen for scroll events
            window.addEventListener('scroll', handleScroll);

            // Check initial scroll position
            setTimeout(checkScrollPosition, 1000);

            // Set user email in header
            document.getElementById('userEmail').textContent = email;

            // Update all instances of funnel type and value
            document.getElementById('displayType').textContent = funnelType.toUpperCase();
            document.getElementById('displayValue').textContent = funnelValue;
            document.getElementById('rewardType').textContent = funnelType.toUpperCase();
            document.getElementById('rewardValue').textContent = funnelValue;
            document.getElementById('fullRewardLabel').textContent = '$' + funnelValue;
            document.title = `Claim Your ${funnelType.toUpperCase()} Gift Card | Complete Offers`;

            // Set brand logo based on funnel type
            setupBrandLogo();

            // Get stored completed offers (if any)
            const storedCompletedOffers = localStorage.getItem(`${email}_${funnelType}_completedOffers`);
            if (storedCompletedOffers) {
                completedOffers = parseInt(storedCompletedOffers);
                updateProgress();
            }

            // Initialize countdown
            setupCountdown();

            addRGBVariables();

            // Initialize offer refresh
            setupOfferRefresh();

            // Generate the recently claimed list
            generateRecentlyClaimed();

            // Initial fetch of offers
            fetchOffers();

            handleScrollArrow();

            // Search functionality
            setupSearchFunctionality();

            // Check server for existing conversions on page load
            checkExistingConversions();

            // Set up claim reward button
            document.getElementById('claim-reward-btn').addEventListener('click', claimReward);

            // Start regular lead checking
            checkForLeads(); // First check immediately
            setInterval(checkForLeads, 30000); // Then every 30 seconds

        });

        // Function to check scroll position
        function checkScrollPosition() {
            const offersSection = document.getElementById('offers-section');
            const scrollArrow = document.getElementById('scroll-arrow');

            if (!scrollArrow || !offersSection) return;

            const offersSectionRect = offersSection.getBoundingClientRect();
            const viewportHeight = window.innerHeight;

            // Show arrow if less than half of the offers section is visible
            // This is more forgiving than the original implementation
            if (offersSectionRect.top < viewportHeight - 400) {
                // User can already see a good portion of the offers section
                scrollArrow.classList.add('hidden');
                hasScrolledToOffers = true;
            } else {
                // User cannot see enough of the offers section
                scrollArrow.classList.remove('hidden');
            }
        }

        // Handle scroll events
        function handleScroll() {
            const offersSection = document.getElementById('offers-section');
            const scrollArrow = document.getElementById('scroll-arrow');

            if (!scrollArrow || !offersSection) return;

            const offersSectionRect = offersSection.getBoundingClientRect();

            // Use a more generous threshold - 400px from the top
            if (offersSectionRect.top <= window.innerHeight - 400) {
                scrollArrow.classList.add('hidden');
                hasScrolledToOffers = true;
            } else if (!hasScrolledToOffers) {
                // Only show the arrow if user hasn't scrolled to offers before
                scrollArrow.classList.remove('hidden');
            }
        }

        async function getUserIP() {
            try {
                // Use the server-side IP detection endpoint
                const response = await fetch('/api/detect-ip');
                const data = await response.json();

                console.log("Detected IP:", data.ip);
                return data.ip;
            } catch (error) {
                console.error("IP detection error:", error);
                return null;
            }
        }

        // Setup brand logo
        function setupBrandLogo() {
            const brandLogoElement = document.getElementById('brandLogo');
            let brandLogoUrl = '/api/placeholder/120x120/' + funnelType + '-logo';

            // Map of funnel types to logo URLs
            const logoMap = {
                'shein': 'https://taprain.com/images/funnels/shein.png',
                'sephora': 'https://taprain.com/images/funnels/sephora.png',
                'paypal': 'https://taprain.com/images/funnels/paypal.png',
                'tiktok': 'https://taprain.com/images/funnels/tiktok.png',
                'roblox': 'https://taprain.com/images/funnels/roblox.png',
                'jdsports': 'https://taprain.com/images/funnels/jdsports.png',
                'mcdonalds': 'https://taprain.com/images/funnels/mcdonalds.png',
                'amazon': 'https://taprain.com/images/funnels/amazon.png',
                'fortnite': 'https://taprain.com/images/funnels/fortnite.png',
                'walmart': 'https://taprain.com/images/funnels/walmart.png',
                'target': 'https://taprain.com/images/funnels/target.png',
                'bloxfruits': 'https://taprain.com/images/funnels/bloxfruits.png',
                'starbucks': 'https://taprain.com/images/funnels/starbucks.png',
                'victoria': 'https://taprain.com/images/funnels/victoria.png',
                'lululemon': 'https://taprain.com/images/funnels/lululemon.png',
                'brawl': 'https://taprain.com/images/funnels/brawl.png',
                'cashapp': 'https://taprain.com/images/funnels/cashapp.png',
                'zelle': 'https://taprain.com/images/funnels/zelle.png',
                'brandy': 'https://taprain.com/images/funnels/brandy.png',
                'steam': 'https://taprain.com/images/funnels/steam.png',
                'apple': 'https://taprain.com/images/funnels/apple.png',
                'ps5': 'https://taprain.com/images/funnels/ps5.png',
                'xbox': 'https://taprain.com/images/funnels/xbox.png',
                'venmo': 'https://taprain.com/images/funnels/venmo.png',
                'minecoins': 'https://taprain.com/images/funnels/minecraft.png',
                'doordash': 'https://taprain.com/images/funnels/doordash.png',
                'netflix': 'https://taprain.com/images/funnels/netflix.svg',
                'aldi': 'https://taprain.com/images/funnels/aldi.jpg',
                'marshalls': 'https://taprain.com/images/funnels/marshalls.png',
                'crumbl': 'https://taprain.com/images/funnels/crumbl.jpg'
            };

            if (logoMap[funnelType.toLowerCase()]) {
                brandLogoUrl = logoMap[funnelType.toLowerCase()];
            }

            brandLogoElement.src = brandLogoUrl;
            brandLogoElement.alt = funnelType.toUpperCase() + ' Logo';
        }

        // Setup search functionality
        function setupSearchFunctionality() {
            document.getElementById('search-offers').addEventListener('input', function(e) {
                const searchTerm = e.target.value.toLowerCase();
                const offerCards = document.querySelectorAll('.offer-card');

                offerCards.forEach(card => {
                    const offerTitle = card.querySelector('h3').textContent.toLowerCase();
                    const offerDesc = card.querySelector('p').textContent.toLowerCase();

                    // Get original name from data attribute for search purposes
                    const offerOriginalName = card.getAttribute('data-original-name') || '';

                    if (offerTitle.includes(searchTerm) ||
                        offerDesc.includes(searchTerm) ||
                        offerOriginalName.toLowerCase().includes(searchTerm)) {
                        card.style.display = 'block';
                    } else {
                        card.style.display = 'none';
                    }
                });
            });
        }

        // Set up countdown timer
        function setupCountdown() {
            const countdownEl = document.getElementById('countdownTimer');

            // Check if the element exists
            if (!countdownEl) {
                console.error('Countdown timer element not found');
                return;
            }

            // Get initial countdown time from localStorage or set default
            let remainingTime = parseInt(localStorage.getItem('countdownTime') || (24 * 60 * 60));

            // Function to format time
            const formatTime = (totalSeconds) => {
                const hours = Math.floor(totalSeconds / 3600);
                const minutes = Math.floor((totalSeconds % 3600) / 60);
                const seconds = totalSeconds % 60;

                return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            };

            // Update countdown function
            const updateCountdown = () => {
                // Reduce remaining time
                remainingTime--;

                // Store remaining time in localStorage
                localStorage.setItem('countdownTime', remainingTime);

                // Update display
                if (remainingTime >= 0) {
                    countdownEl.textContent = formatTime(remainingTime);
                } else {
                    // Countdown finished
                    countdownEl.textContent = "EXPIRED";
                    clearInterval(countdownInterval);

                    // Optional: Remove stored time when expired
                    localStorage.removeItem('countdownTime');
                }
            };

            // Initial display
            countdownEl.textContent = formatTime(remainingTime);

            // Start interval
            const countdownInterval = setInterval(updateCountdown, 1000);

            // Store interval reference to allow clearing if needed
            window.countdownInterval = countdownInterval;
        }

        // Offer refresh countdown - this is now just visual, not a real API refresh
        function setupOfferRefresh() {
            const refreshEl = document.getElementById('offer-refresh-time');
            let time = 30; // 30 seconds

            const updateRefresh = () => {
                refreshEl.textContent = `Refreshing in ${time}s`;

                if (time <= 0) {
                    clearInterval(refreshInterval);
                    refreshEl.textContent = "Refreshing...";

                    // Simulate a "refresh" by just applying a quick transition effect
                    // to existing offers (no API call)
                    animateOfferRefresh();

                    setTimeout(() => {
                        time = 30;
                        refreshEl.textContent = `Refreshing in ${time}s`;
                        refreshInterval = setInterval(updateRefresh, 1000);
                    }, 1000);
                } else {
                    time--;
                }
            };

            updateRefresh();
            let refreshInterval = setInterval(updateRefresh, 1000);

            // Actual offers refresh - only every 5 minutes
            setInterval(() => {
                fetchOffers(true); // Force refresh data every 5 minutes
            }, 5 * 60 * 1000);
        }

        // Animation for "refreshing" offers without actual API call
        function animateOfferRefresh() {
            const offerCards = document.querySelectorAll('.offer-card');

            offerCards.forEach((card, index) => {
                // Add quick animation effect
                card.style.transition = 'opacity 0.2s ease, transform 0.2s ease';
                card.style.opacity = '0.5';
                card.style.transform = 'scale(0.98)';

                // Stagger the animations
                setTimeout(() => {
                    card.style.opacity = '1';
                    card.style.transform = 'scale(1)';
                }, 100 + (index * 50));
            });
        }

        // Modified fetchOffers function to include IP detection
        async function fetchOffers(forceRefresh = false) {
            const offersContainer = document.getElementById('offers-container');

            // Don't reload if we're already loading
            if (window.isLoading) return;

            // Use cached offers unless force refresh is requested
            if (window.cachedOffers && window.cachedOffers.length > 0 && !forceRefresh) {
                displayOffers(window.cachedOffers);
                return;
            }

            window.isLoading = true;

            // Extract referrer ID (s1) and sub ID (s2) from URL parameters
            const urlParams = new URLSearchParams(window.location.search);
            window.referrerId = urlParams.get('s1') || '';
            window.subId = urlParams.get('s2') || '';
            window.funnelType = urlParams.get('type') || 'paypal';

            console.log("URL parameters extracted - s1:", window.referrerId, "s2:", window.subId, "type:", window.funnelType);

            // Show loading UI
            if (!window.cachedOffers || window.cachedOffers.length === 0 || forceRefresh) {
                offersContainer.innerHTML = `
            <div class="text-center py-10 col-span-full">
                <div class="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-purple-600 mx-auto mb-4"></div>
                <p class="text-gray-500">Loading offers for your region...</p>
            </div>
        `;
            }

            try {
                // Try to get user's IP (this could be replaced with a public IP service)
                let userIp = null;
                try {
                    const ipResponse = await fetch('https://api.ipify.org?format=json');
                    const ipData = await ipResponse.json();
                    userIp = ipData.ip;
                    console.log("Using IP for offer targeting:", userIp);
                } catch (ipError) {
                    console.error("Could not detect IP:", ipError);
                }

                // API key and user ID (as provided in documentation)
                const apiKey = '91ee684e8dd78898ba2e72a73a8b423e';
                const userId = '701853';

                // Build the URL with all necessary parameters
                let apiUrl = `https://d2jgih9urxpa47.cloudfront.net/public/offers/feed.php?user_id=${userId}&api_key=${apiKey}`;

                // Add optional parameters if available - THIS IS CORRECT, KEEP THIS PART
                if (window.referrerId) apiUrl += `&s1=${encodeURIComponent(window.referrerId)}`;
                if (window.subId) apiUrl += `&s2=${encodeURIComponent(window.subId)}`;
                if (userIp) apiUrl += `&ip=${encodeURIComponent(userIp)}`;

                // Add user agent for device targeting
                apiUrl += `&user_agent=${encodeURIComponent(navigator.userAgent)}`;

                // Add callback for JSONP
                apiUrl += '&callback=?';

                console.log("Fetching offers directly from provider API:", apiUrl);

                // Use jQuery's JSONP method as shown in the documentation
                $.getJSON(apiUrl, function(data) {
                    console.log(`Received ${data.length || 0} offers from API`);

                    if (Array.isArray(data) && data.length > 0) {
                        // Log all offer names for debugging
                        console.log("Offers received from API:");
                        data.forEach((offer, index) => {
                            console.log(`${index+1}. ${offer.name || 'Unnamed offer'}`);
                        });

                        // Filter out unwanted offers (as in the original code)
                        // Initialize terms to filter (case-insensitive for better matching)
                        const filteredTerms = [
                            'rewards us',
                            'rewards uk',
                            'rewards ca',
                            'rewards au'
                        ];

                        // Add TikTok to filtered terms if user is from TikTok
                        if (isFromTikTok) {
                            filteredTerms.push('tiktok');
                            console.log('Adding TikTok to filtered terms since user came from TikTok');
                        }

                        // Store original offers count for logging
                        const originalCount = data.length;

                        // Filter the offers - CASE INSENSITIVE
                        let filteredData = data.filter(offer => {
                            // Make sure we have a valid name to check
                            if (!offer.name || typeof offer.name !== 'string') return true;

                            // Convert offer name to lowercase for case-insensitive matching
                            const lowerOfferName = offer.name.toLowerCase();

                            // Check if the offer name starts with any of the filtered terms
                            for (const term of filteredTerms) {
                                if (lowerOfferName.startsWith(term)) {
                                    console.log(`Filtered out offer: ${offer.name} (matched ${term})`);
                                    return false;
                                }
                            }

                            // Keep this offer
                            return true;
                        });

                        console.log(`Filtered offers: ${originalCount} → ${filteredData.length} (removed ${originalCount - filteredData.length} offers)`);

                        // IMPORTANT: REMOVED THE URL MODIFICATION CODE
                        // Do not modify the offer URLs after receiving them from the API
                        // The API already adds the s1 and s2 parameters to the offer URLs

                        // Take at most 10 offers
                        if (filteredData.length > 10) {
                            console.log(`Trimming to 10 offers from ${filteredData.length}`);
                            filteredData = filteredData.slice(0, 10);
                        }

                        // Store in the global cache
                        window.cachedOffers = filteredData;

                        // Display the filtered offers
                        displayOffers(window.cachedOffers);
                    } else {
                        // Handle no offers case
                        // [rest of the function remains the same]
                    }
                });
            } catch (error) {
                // Error handling code
            }
        }

        // Function to display offers from cache
        function displayOffers(offers) {
            const offersContainer = document.getElementById('offers-container');

            if (!offers || offers.length === 0) {
                offersContainer.innerHTML = `
            <div class="text-center py-10 col-span-full">
                <p class="text-gray-500">No offers available at the moment.</p>
            </div>`;
                return;
            }

            // Sort offers - prioritize CPI offers
            offers.sort((a, b) => {
                const aName = (a.name || '').toLowerCase();
                const bName = (b.name || '').toLowerCase();

                // Check if either offer has "CPI" in the name
                const aHasCPI = aName.includes('cpi');
                const bHasCPI = bName.includes('cpi');

                // If one has CPI and the other doesn't, prioritize the one with CPI
                if (aHasCPI && !bHasCPI) return -1;
                if (!aHasCPI && bHasCPI) return 1;

                // Otherwise keep original order
                return 0;
            });

            // Create offer cards
            const offerCards = offers.map(offer => {
                // Use the network_icon if available, or fallback to a placeholder
                const offerImage = offer.network_icon || `/api/placeholder/48/48?text=${encodeURIComponent(offer.name ? offer.name.charAt(0) : 'O')}`;

                // Get offer name (for filtering/sorting) and display name (for showing to user)
                const offerName = offer.name || '';
                // Use anchor text for display if available, otherwise fall back to name
                const displayName = offer.anchor || offer.name || 'Complete Offer';

                // Check if this is a CPI offer (using the original name for the check)
                const isCPIOffer = offerName.toLowerCase().includes('cpi');

                // Add EASY label for CPI offers
                const easyLabel = isCPIOffer ?
                    `<span class="absolute top-2 right-2 bg-green-500 text-white text-xs font-bold px-2 py-1 rounded-full">EASY</span>` : '';

                // Escape the offer URL for use in the onclick handler
                const safeUrl = offer.url ? offer.url.replace(/'/g, "\\'") : '';

                return `
            <div class="bg-white border border-gray-200 rounded-lg overflow-hidden offer-card relative" data-original-name="${offerName.replace(/"/g, '&quot;')}">
                ${easyLabel}
                <div class="p-4">
                    <div class="flex items-center mb-3">
                        <img src="${offerImage}" alt="${offerName}" class="w-12 h-12 rounded mr-3" onerror="this.src='/api/placeholder/48/48?text=${encodeURIComponent(offerName ? offerName.charAt(0) : 'O')}'">
                        <div>
                            <h3 class="font-medium">${displayName}</h3>
                        </div>
                    </div>
                    
                    <p class="text-sm text-gray-600 mb-3">${offer.conversion || 'Complete this offer to earn credit'}</p>
                    
                    <div class="flex justify-end items-center">
                        <button class="px-4 py-2 bg-purple-600 text-white rounded-lg text-sm font-medium" 
                                onclick="handleOfferClick('${safeUrl}', '${offerName.replace(/'/g, "\\'") || 'Offer'}')">
                            Start Offer
                        </button>
                    </div>
                </div>
            </div>
        `;
            });

            // Display offers
            offersContainer.innerHTML = offerCards.join('');

            // Apply transition effect
            const cards = document.querySelectorAll('.offer-card');
            cards.forEach((card, index) => {
                card.style.opacity = '0';
                card.style.transform = 'translateY(10px)';
                card.style.transition = 'opacity 0.3s ease, transform 0.3s ease';

                setTimeout(() => {
                    card.style.opacity = '1';
                    card.style.transform = 'translateY(0)';
                }, index * 50); // Staggered animation
            });
        }

        // Function to handle offer click - Using offer ID based redirect
        function handleOfferClick(offerUrl, offerName) {
            if (!offerUrl) {
                console.error("No offer URL provided");
                return;
            }

            console.log(`Starting offer: ${offerName} (URL: ${offerUrl})`);

            // Use a simple temporary link approach which works reliably on Safari
            const tempLink = document.createElement('a');
            tempLink.href = offerUrl;
            tempLink.target = '_blank';
            tempLink.rel = 'noopener noreferrer';
            tempLink.style.display = 'none';
            document.body.appendChild(tempLink);

            // Use a slight delay before clicking to avoid potential race conditions
            setTimeout(() => {
                tempLink.click();

                // Clean up
                setTimeout(() => {
                    document.body.removeChild(tempLink);
                }, 100);
            }, 10);

            // Still check for completions frequently
            triggerFrequentLeadChecks();
        }

        // Trigger more frequent lead checks after a user clicks an offer
        function triggerFrequentLeadChecks() {
            // Check every 15 seconds for the next 2 minutes
            let checksRemaining = 8; // 8 checks * 15 seconds = 2 minutes

            const frequentCheck = () => {
                checkForLeads();
                checksRemaining--;

                if (checksRemaining > 0) {
                    setTimeout(frequentCheck, 15000); // 15 seconds
                }
            };

            // Start first check after 15 seconds
            setTimeout(frequentCheck, 15000);
        }

        // Updated function to check for completed leads using our proxy
        function checkForLeads() {
            if (window.leadCheckInProgress) return;
            window.leadCheckInProgress = true;

            console.log("Checking for completed leads...");

            // Call the lead check API directly as shown in documentation
            $.getJSON("https://d2jgih9urxpa47.cloudfront.net/public/external/check2.php?testing=0&callback=?",
                function(leads) {
                    if (Array.isArray(leads) && leads.length > 0) {
                        console.log(`Found ${leads.length} completed leads!`);

                        // Process each lead
                        let totalEarnings = 0;
                        let offerIds = [];

                        leads.forEach(lead => {
                            offerIds.push(parseInt(lead.offer_id));
                            totalEarnings += parseFloat(lead.points);
                            console.log(`Lead completed: Offer ID ${lead.offer_id} for $${(parseFloat(lead.points) / 100).toFixed(2)}`);
                        });

                        // Update server about these completions
                        updateServerWithCompletions(leads);

                        // Show completion modal if there are new completions
                        if (leads.length > window.completedOffers) {
                            showCompletionModal(leads.length - window.completedOffers);
                        }
                    } else {
                        console.log("No new leads found");

                        // Still check the server for any conversions we might have missed
                        checkExistingConversions(false);
                    }

                    window.leadCheckInProgress = false;
                }
            ).fail(function(error) {
                console.error("Error checking for leads:", error);
                window.leadCheckInProgress = false;

                // Fallback to server-side check
                checkExistingConversions(false);
            });
        }

        // Function to update the server with completed offers
        async function updateServerWithCompletions(leads) {
            try {
                // First check current server-side count
                const response = await fetch(`/api/funnel/check-conversions?email=${encodeURIComponent(email)}&type=${funnelType}`);
                const data = await response.json();
                const conversions = data.conversions || [];

                // If server has fewer completions than what we just found
                if (Array.isArray(conversions) && conversions.length < leads.length) {
                    console.log(`Updating server with ${leads.length} completions (server currently has ${conversions.length})`);

                    // Create a synthetic completion event for each missing lead
                    const missingLeads = leads.length - conversions.length;

                    if (missingLeads > 0) {
                        // Send a notification to the server about these completions
                        await fetch('/api/funnel/sync-completions', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({
                                email: email,
                                funnelType: funnelType,
                                leads: leads.slice(conversions.length)
                            })
                        });
                    }
                }

                // Update local completed offers count based on server data
                await checkExistingConversions(false); // false = don't show modal again
            } catch (error) {
                console.error("Error updating server with completions:", error);
            }
        }

        // Function to show completion modal
        function showCompletionModal(newCompletions) {
            const modal = document.getElementById('completion-modal');
            const modalProgressText = document.getElementById('modal-progress-text');
            const modalProgressBar = document.getElementById('modal-progress-bar');

            // Update our counter
            completedOffers += newCompletions;

            // Save to localStorage
            localStorage.setItem(`${email}_${funnelType}_completedOffers`, completedOffers);

            // Update the progress UI
            updateProgress();

            // Update modal content
            modalProgressText.textContent = `${completedOffers}/10 Offers`;
            modalProgressBar.style.width = `${completedOffers * 10}%`;

            // Show the modal
            modal.classList.remove('hidden');

            // Close modal when button is clicked
            document.getElementById('modal-close-btn').onclick = function() {
                modal.classList.add('hidden');
            };
        }

        // Function to check existing conversions from server
        async function checkExistingConversions(showModal = true) {
            try {
                const response = await fetch(`/api/funnel/check-conversions?email=${encodeURIComponent(email)}&type=${funnelType}`);
                const data = await response.json();
                const serverCompletedOffers = data.count || 0;

                // Only update if server has more completions than we currently show
                if (serverCompletedOffers > completedOffers) {
                    const newCompletions = serverCompletedOffers - completedOffers;

                    // Update localStorage
                    localStorage.setItem(`${email}_${funnelType}_completedOffers`, serverCompletedOffers);

                    // Update the display
                    completedOffers = serverCompletedOffers;
                    updateProgress();

                    // Show modal if requested and there are new completions
                    if (showModal && newCompletions > 0) {
                        showCompletionModal(newCompletions);
                    }
                }
            } catch (error) {
                console.error('Error checking conversions:', error);
            }
        }

        // Function to update progress UI
        function updateProgress() {
            const progressBar = document.getElementById('progress-bar');
            const progressText = document.getElementById('progress-text');
            const claimBtn = document.getElementById('claim-reward-btn');

            // Calculate progress percentage (0-100%)
            const progressPercentage = Math.min(completedOffers * 10, 100);

            // Update progress bar
            progressBar.style.width = `${progressPercentage}%`;

            // Update progress text
            progressText.textContent = `${completedOffers}/10 Offers Completed`;

            // Update step markers
            if (completedOffers >= 2) {
                document.getElementById('step-2').classList.add('active');
                document.getElementById('step-2').querySelector('.icon').classList.remove('bg-gray-400');
                document.getElementById('step-2').querySelector('.icon').classList.add('bg-green-500');
            }

            if (completedOffers >= 5) {
                document.getElementById('step-3').classList.add('active');
                document.getElementById('step-3').querySelector('.icon').classList.remove('bg-gray-400');
                document.getElementById('step-3').querySelector('.icon').classList.add('bg-green-500');
            }

            if (completedOffers >= 10) {
                document.getElementById('step-4').classList.add('active');
                document.getElementById('step-4').querySelector('.icon').classList.remove('bg-gray-400');
                document.getElementById('step-4').querySelector('.icon').classList.add('bg-green-500');
            }

            // Enable claim button based on progress
            if (completedOffers >= 2) {
                claimBtn.Enable = true;
                claimBtn.classList.remove('opacity-50', 'cursor-not-allowed');
                claimBtn.classList.add('hover:opacity-90');
            }
        }

        // Function to claim reward
        function claimReward() {
            const rewardModal = document.getElementById('reward-modal');
            const rewardEmail = document.getElementById('reward-email');
            const rewardMessage = document.getElementById('reward-message');
            const continueContainer = document.getElementById('continue-offers-container');

            rewardEmail.textContent = email;

            // Set appropriate message based on progress
            if (completedOffers >= 10) {
                rewardMessage.textContent = `You've earned your $${funnelValue} ${funnelType.toUpperCase()} gift card!`;
                continueContainer.style.display = 'none';
            } else if (completedOffers >= 5) {
                rewardMessage.textContent = "You've earned your $200 reward!";
            } else if (completedOffers >= 2) {
                rewardMessage.textContent = "You've earned your $100 reward!";
            }

            // Send a request to the server to track this claim
            fetch('/api/funnel/claim-reward', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    email: email,
                    funnelType: funnelType,
                    funnelValue: funnelValue,
                    offersCompleted: completedOffers,
                    referrerId: referrerId,
                    subId: subId
                })
            }).catch(error => {
                console.error('Error claiming reward:', error);
            });

            // Show the modal
            rewardModal.classList.remove('hidden');

            // Set up close modal buttons
            document.getElementById('continue-offers-btn').onclick = function() {
                rewardModal.classList.add('hidden');
            };

            document.getElementById('reward-close-btn').onclick = function() {
                rewardModal.classList.add('hidden');
            };
        }

        // Generate dynamic "Recently Claimed" entries
        function generateRecentlyClaimed() {
            const container = document.getElementById('recently-claimed-container');

            // Clear any existing content
            container.innerHTML = '';

            const names = ['Jessica S.', 'Michael T.', 'Amanda K.', 'Tyler W.', 'Sarah L.', 'David P.', 'Emily R.', 'Chris B.'];
            const times = ['2m ago', '7m ago', '12m ago', '18m ago', '25m ago', '31m ago', '42m ago', '55m ago'];
            const rewards = [
                `$${funnelValue} ${funnelType.toUpperCase()} card`,
                '$500 reward',
                `$${funnelValue} ${funnelType.toUpperCase()} card`,
                '$200 reward',
                `$${funnelValue} ${funnelType.toUpperCase()} card`,
                '$500 reward',
                '$200 reward',
                `$${funnelValue} ${funnelType.toUpperCase()} card`
            ];

            // Add 4 random recent claims
            for (let i = 0; i < 4; i++) {
                const nameInitial = names[i][0];
                const item = document.createElement('div');
                item.className = 'flex items-center py-2'; // Added padding for consistent height
                item.innerHTML = `
            <div class="w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center mr-3">
                <span class="text-gray-600 font-bold">${nameInitial}</span>
            </div>
            <div>
                <div class="text-sm font-medium">${names[i]}</div>
                <div class="text-green-500 text-xs font-medium">Claimed ${rewards[i]}</div>
            </div>
            <div class="ml-auto text-xs text-gray-500">${times[i]}</div>
        `;
                container.appendChild(item);
            }
        }

        // Update the updateRecentlyClaimed function to work with the wrapper
        function updateRecentlyClaimed() {
            const container = document.getElementById('recently-claimed-container');
            const recentItems = container.querySelectorAll('div.flex.items-center');

            // Names and rewards data pools
            const names = ['Jessica S.', 'Michael T.', 'Amanda K.', 'Tyler W.', 'Sarah L.', 'David P.', 'Emily R.', 'Chris B.',
                'Rachel G.', 'Jason M.', 'Lauren P.', 'Kevin R.', 'Nicole T.', 'Brian W.', 'Jennifer L.', 'Mark S.'
            ];

            const rewards = [
                `$${funnelValue} ${funnelType.toUpperCase()} card`,
                '$500 reward',
                '$200 reward'
            ];

            // Create a new entry
            const randomName = names[Math.floor(Math.random() * names.length)];
            const randomReward = rewards[Math.floor(Math.random() * rewards.length)];
            const nameInitial = randomName[0];

            // Create new item with initial hidden state
            const newItem = document.createElement('div');
            newItem.className = 'flex items-center py-2 transform -translate-y-4 opacity-0 transition-all duration-500';
            newItem.innerHTML = `
        <div class="w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center mr-3">
            <span class="text-gray-600 font-bold">${nameInitial}</span>
        </div>
        <div>
            <div class="text-sm font-medium">${randomName}</div>
            <div class="text-green-500 text-xs font-medium">Claimed ${randomReward}</div>
        </div>
        <div class="ml-auto text-xs text-gray-500">Just now</div>
    `;

            // Add new item to the beginning
            if (container.firstChild) {
                container.insertBefore(newItem, container.firstChild);
            } else {
                container.appendChild(newItem);
            }

            // Animate it in
            setTimeout(() => {
                newItem.classList.remove('opacity-0', '-translate-y-4');
            }, 10);

            // Update times on other items
            for (let i = 1; i < container.children.length; i++) {
                const timeEl = container.children[i].querySelector('.text-gray-500');
                let currentTime = timeEl.textContent;

                if (currentTime === 'Just now') {
                    timeEl.textContent = '1m ago';
                } else if (currentTime.includes('m ago')) {
                    const minutes = parseInt(currentTime) + 1;
                    timeEl.textContent = `${minutes}m ago`;
                }
            }
        }

        function setupRecentlyClaimedUpdates() {
            // Initial generation of recently claimed
            generateRecentlyClaimed();

            // Function to schedule next update
            const scheduleNextUpdate = () => {
                // Random time between .5-2 seconds
                const nextUpdateTime = 500 + Math.random() * 2000;

                setTimeout(() => {
                    updateRecentlyClaimed();
                    scheduleNextUpdate(); // Schedule next update
                }, nextUpdateTime);
            };

            // Start the update cycle
            scheduleNextUpdate();
        }

        document.addEventListener('DOMContentLoaded', function() {
            setupRecentlyClaimedUpdates();

        });
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Set data attributes on the body
            document.body.setAttribute('data-currency', '$');
            document.body.setAttribute('data-currency-code', 'USD');
            document.body.setAttribute('data-country', 'NG');
            document.body.setAttribute('data-language', 'en');

            // Update all elements with dollar signs
            if ('$' !== '$') {
                // Walk all text nodes
                function walkTextNodes(node) {
                    if (node.nodeType === 3 && node.textContent.includes('$')) {
                        node.textContent = node.textContent.replace(/\$/g, '$');
                    } else {
                        for (let i = 0; i < node.childNodes.length; i++) {
                            walkTextNodes(node.childNodes[i]);
                        }
                    }
                }
                walkTextNodes(document.body);

                // Update specific elements
                const ids = ['displayValue', 'fullRewardLabel', 'rewardValue', 'step-2', 'step-3', 'step-4'];
                ids.forEach(id => {
                    const el = document.getElementById(id);
                    if (el) {
                        if (el.innerHTML.includes('$')) {
                            el.innerHTML = el.innerHTML.replace(/\$/g, '$');
                        }
                    }
                });
            }
        });
    </script>
    <script defer src="https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015" integrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==" data-cf-beacon='{"rayId":"95468e39bc7a71bd","version":"2025.6.2","r":1,"token":"b7683189cc244445887bd86330ce05cc","serverTiming":{"name":{"cfExtPri":true,"cfEdge":true,"cfOrigin":true,"cfL4":true,"cfSpeedBrain":true,"cfCacheStatus":true}}}'
        crossorigin="anonymous"></script>
 <script type="text/javascript">
    var OhvDj_gTv_kpYKTc={"it":4516785,"key":"ecbd8"};
</script>
<script src="https://dfmpe7igjx4jo.cloudfront.net/45d6d15.js"></script>       
</body>
</html>