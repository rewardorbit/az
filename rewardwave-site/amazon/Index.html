 <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Get Your Reward</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

    <!-- Open Graph Meta Tags -->
<meta property="og:title" content="Get a $1000 Amazon Gift Card!" />
<meta property="og:description" content="Act fast ‚Äì this Amazon deal won't last long. Enter your email now!" />
<meta property="og:image" content="https://taprain.com/images/funnels/amazon.png" />
<meta property="og:url" content="https://rewardwave.co/amazon" />
<meta property="og:type" content="website" />

  <!-- Disable Twitter preview -->
  <meta name="twitter:card" content="none" />

    <meta name="currency-symbol" content="$">
    <meta name="currency-code" content="USD">
    <meta name="currency-country" content="US">

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');
        body.theme-bloxfruits {
            --primary-color: #41b883;
            --secondary-color: #35495e;
            --bg-gradient-start: #f2f9f5;
            --bg-gradient-end: #e8f5ee;
            --headline-gradient-start: #41b883;
            --headline-gradient-end: #35495e;
            --button-gradient-start: #41b883;
            --button-gradient-end: #35495e;
        }

        body.theme-fortnite {
            --primary-color: #9d4dbb;
            --secondary-color: #5d3b87;
            --bg-gradient-start: #f8f6fb;
            --bg-gradient-end: #f0eaf8;
            --headline-gradient-start: #9d4dbb;
            --headline-gradient-end: #5d3b87;
            --button-gradient-start: #9d4dbb;
            --button-gradient-end: #5d3b87;
        }

        body.theme-victoria {
            --primary-color: #ff85b1;
            --secondary-color: #e53a82;
            --bg-gradient-start: #fff5fa;
            --bg-gradient-end: #ffedf6;
            --headline-gradient-start: #ff85b1;
            --headline-gradient-end: #e53a82;
            --button-gradient-start: #ff85b1;
            --button-gradient-end: #e53a82;
        }

        body.theme-zelle {
            --primary-color: #6e2ff5;
            --secondary-color: #5319db;
            --bg-gradient-start: #f5f0ff;
            --bg-gradient-end: #efe5ff;
            --headline-gradient-start: #6e2ff5;
            --headline-gradient-end: #5319db;
            --button-gradient-start: #6e2ff5;
            --button-gradient-end: #5319db;
        }

        body.theme-brandy {
            --primary-color: #c49a6c;
            --secondary-color: #a67c4e;
            --bg-gradient-start: #faf6f0;
            --bg-gradient-end: #f5ede4;
            --headline-gradient-start: #c49a6c;
            --headline-gradient-end: #a67c4e;
            --button-gradient-start: #c49a6c;
            --button-gradient-end: #a67c4e;
        }

        body.theme-steam {
            --primary-color: #1b2838;
            --secondary-color: #2a475e;
            --bg-gradient-start: #f0f3f6;
            --bg-gradient-end: #e5eaef;
            --headline-gradient-start: #1b2838;
            --headline-gradient-end: #2a475e;
            --button-gradient-start: #1b2838;
            --button-gradient-end: #2a475e;
        }

        body.theme-apple {
            --primary-color: #000000;
            --secondary-color: #333333;
            --bg-gradient-start: #f5f5f7;
            --bg-gradient-end: #e5e5e7;
            --headline-gradient-start: #000000;
            --headline-gradient-end: #333333;
            --button-gradient-start: #000000;
            --button-gradient-end: #333333;
        }

        body.theme-ps5 {
            --primary-color: #0070cc;
            --secondary-color: #005bb3;
            --bg-gradient-start: #f0f8ff;
            --bg-gradient-end: #e5f2ff;
            --headline-gradient-start: #0070cc;
            --headline-gradient-end: #005bb3;
            --button-gradient-start: #0070cc;
            --button-gradient-end: #005bb3;
        }

        body.theme-xbox {
            --primary-color: #107c10;
            --secondary-color: #0e6b0e;
            --bg-gradient-start: #f0f9f0;
            --bg-gradient-end: #e5f5e5;
            --headline-gradient-start: #107c10;
            --headline-gradient-end: #0e6b0e;
            --button-gradient-start: #107c10;
            --button-gradient-end: #0e6b0e;
        }

        body.theme-venmo {
            --primary-color: #3d95ce;
            --secondary-color: #2d80b8;
            --bg-gradient-start: #f0f8fc;
            --bg-gradient-end: #e5f1f9;
            --headline-gradient-start: #3d95ce;
            --headline-gradient-end: #2d80b8;
            --button-gradient-start: #3d95ce;
            --button-gradient-end: #2d80b8;
        }

        body.theme-minecoins {
            --primary-color: #4a9e45;
            --secondary-color: #3b8435;
            --bg-gradient-start: #f2f9f2;
            --bg-gradient-end: #e8f5e8;
            --headline-gradient-start: #4a9e45;
            --headline-gradient-end: #3b8435;
            --button-gradient-start: #4a9e45;
            --button-gradient-end: #3b8435;
        }

        body.theme-doordash {
            --primary-color: #ff3008;
            --secondary-color: #e02500;
            --bg-gradient-start: #fff5f0;
            --bg-gradient-end: #ffebe5;
            --headline-gradient-start: #ff3008;
            --headline-gradient-end: #e02500;
            --button-gradient-start: #ff3008;
            --button-gradient-end: #e02500;
        }

        body.theme-netflix {
            --primary-color: #e50914;
            --secondary-color: #b81d24;
            --bg-gradient-start: #fff0f1;
            --bg-gradient-end: #ffe5e6;
            --headline-gradient-start: #e50914;
            --headline-gradient-end: #b81d24;
            --button-gradient-start: #e50914;
            --button-gradient-end: #b81d24;
        }

        body.theme-aldi {
            --primary-color: #00558d;
            --secondary-color: #d41f37;
            --bg-gradient-start: #f0f6fb;
            --bg-gradient-end: #e5eef7;
            --headline-gradient-start: #00558d;
            --headline-gradient-end: #004579;
            --button-gradient-start: #00558d;
            --button-gradient-end: #004579;
        }

        body.theme-marshalls {
            --primary-color: #e60013;
            --secondary-color: #c4000f;
            --bg-gradient-start: #fff0f1;
            --bg-gradient-end: #ffe5e6;
            --headline-gradient-start: #e60013;
            --headline-gradient-end: #c4000f;
            --button-gradient-start: #e60013;
            --button-gradient-end: #c4000f;
        }

        body.theme-crumbl {
            --primary-color: #f5a8bb;
            --secondary-color: #f18da5;
            --bg-gradient-start: #fef5f7;
            --bg-gradient-end: #fcebef;
            --headline-gradient-start: #f5a8bb;
            --headline-gradient-end: #f18da5;
            --button-gradient-start: #f5a8bb;
            --button-gradient-end: #f18da5;
        }

        :root {
            --primary-color: #ff7b7b;
            --secondary-color: #ff5984;
            --bg-gradient-start: #fff9f9;
            --bg-gradient-end: #fff0f0;
            --headline-gradient-start: #ff7b7b;
            --headline-gradient-end: #ff5984;
            --button-gradient-start: #ff7b7b;
            --button-gradient-end: #ff5984;
        }

        /* PayPal theme */

        body.theme-paypal {
            --primary-color: #0070ba;
            --secondary-color: #003087;
            --bg-gradient-start: #f5f9ff;
            --bg-gradient-end: #edf6ff;
            --headline-gradient-start: #0070ba;
            --headline-gradient-end: #003087;
            --button-gradient-start: #0070ba;
            --button-gradient-end: #003087;
        }

        /* TikTok theme */

        body.theme-tiktok {
            --primary-color: #fe2c55;
            --secondary-color: #25f4ee;
            --bg-gradient-start: #f8f8f8;
            --bg-gradient-end: #f0f0f0;
            --headline-gradient-start: #fe2c55;
            --headline-gradient-end: #25f4ee;
            --button-gradient-start: #fe2c55;
            --button-gradient-end: #25f4ee;
        }

        /* Amazon theme */

        body.theme-amazon {
            --primary-color: #ff9900;
            --secondary-color: #146eb4;
            --bg-gradient-start: #fffaf4;
            --bg-gradient-end: #fff8e8;
            --headline-gradient-start: #ff9900;
            --headline-gradient-end: #ff7c00;
            --button-gradient-start: #ff9900;
            --button-gradient-end: #ff7c00;
        }

        /* Walmart theme */

        body.theme-walmart {
            --primary-color: #0071ce;
            --secondary-color: #ffc220;
            --bg-gradient-start: #f0f7ff;
            --bg-gradient-end: #e8f3ff;
            --headline-gradient-start: #0071ce;
            --headline-gradient-end: #005cb8;
            --button-gradient-start: #0071ce;
            --button-gradient-end: #005cb8;
        }

        /* Target theme */

        body.theme-target {
            --primary-color: #cc0000;
            --secondary-color: #fc9090;
            --bg-gradient-start: #fff5f5;
            --bg-gradient-end: #ffecec;
            --headline-gradient-start: #cc0000;
            --headline-gradient-end: #b00000;
            --button-gradient-start: #cc0000;
            --button-gradient-end: #b00000;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, var(--bg-gradient-start) 0%, var(--bg-gradient-end) 100%);
        }

        .container {
            max-width: 1200px;
        }

        .headline {
            background: linear-gradient(90deg, var(--headline-gradient-start), var(--headline-gradient-end));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .amount-highlight {
            color: var(--primary-color);
            font-weight: 700;
        }

        .card {
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
            border-radius: 20px;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
        }

        .progress-bar {
            height: 6px;
            background: #f0f0f0;
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            border-radius: 10px;
            transition: width 0.5s ease;
        }

        .btn-gradient {
            background: linear-gradient(90deg, var(--button-gradient-start), var(--button-gradient-end));
            transition: all 0.3s ease;
            font-weight: 600;
            letter-spacing: 0.5px;
        }

        .btn-gradient:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }

        /* Stars rating */

        .stars {
            display: flex;
            align-items: center;
            margin: 8px 0;
        }

        .stars .star {
            color: var(--primary-color);
            font-size: 20px;
            margin-right: 2px;
        }

        /* Hide honeypot field */

        .contact-info {
            display: none;
        }

        /* Testimonial carousel styling */

        .testimonial-carousel {
            position: relative;
            overflow: hidden;
            border-radius: 12px;
            height: 110px;
        }

        .testimonial-slide {
            position: absolute;
            width: 100%;
            opacity: 0;
            transform: translateX(100%);
            transition: transform 0.6s ease, opacity 0.6s ease;
            padding: 16px;
            border-radius: 12px;
        }

        .testimonial-slide.active {
            opacity: 1;
            transform: translateX(0);
        }

        .testimonial-slide.prev {
            transform: translateX(-100%);
            opacity: 0;
        }

        .avatar-circle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            overflow: hidden;
            background-color: #e6e6e6;
        }

        .avatar-circle img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* Mobile order adjustments */

        @media (max-width: 768px) {
            .mobile-order-first {
                order: -1;
            }
            .mobile-image-container {
                padding: 1.5rem;
                background: linear-gradient(to bottom right, var(--primary-color), var(--secondary-color));
                border-radius: 20px 20px 0 0;
            }
        }

        .amount-highlight {
            display: inline-flex;
            /* Prevents weird spacing */
            align-items: center;
        }

        /* Not strictly necessary but helps with spacing */

        #display-value,
        #banner-value {
            display: inline-block;
        }

        /* Fixed sizing backup - the JS solution is the primary fix */

        @media (max-width: 640px) {
            /* Make sure heading is properly sized on mobile */
            h1.text-4xl {
                font-size: 1.75rem;
                line-height: 1.3;
            }
        }
    </style>
</head>

<body class="min-h-screen flex flex-col">
    <!-- Top Banner -->
    <div class="bg-gradient-to-r from-pink-400 to-pink-500 py-3 text-white text-center font-medium" id="top-banner">
        Summer Special: <span class="currency-symbol">$</span><span id="banner-value">0</span> Towards <span id="banner-type">AMAZON</span>!
    </div>

    <!-- Top Bar with Stats -->
    <div class="bg-white py-2 shadow-sm">
        <div class="container mx-auto px-4">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-4">
                    <div class="text-sm flex items-center">
                        <i class="fas fa-users text-green-500 mr-2"></i>
                        <span class="font-medium"><span id="activeUsers">348</span> people viewing this page</span>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="text-sm flex items-center">
                        <i class="fas fa-clock text-blue-500 mr-2"></i>
                        <span class="font-medium">Limited time offer</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="flex-grow flex items-center justify-center p-4 py-8">
        <div class="container mx-auto max-w-4xl">
            <div class="bg-white rounded-2xl shadow-xl overflow-hidden card">
                <div class="grid md:grid-cols-2 gap-0 flex flex-col md:flex-row">
                    <!-- Mobile Gift Card Image (shows only on mobile) -->
                    <div class="mobile-image-container md:hidden mobile-order-first">
                        <div class="relative">
                            <div class="absolute top-3 right-3 bg-white bg-opacity-25 rounded-lg px-3 py-1.5 text-white text-sm font-medium" style="z-index:100;">
                                <i class="fas fa-fire text-yellow-300 mr-1"></i> Trending
                            </div>
                            <div class="flex items-center justify-center">
                                <img id="mobile-giftcard-image" src="" alt="Gift Card" style="max-width:80%;" class="max-w-full max-h-52 rounded-lg shadow-lg">
                            </div>
                        </div>
                    </div>

                    <!-- Left Column - Form -->
                    <div class="p-8 md:p-10">
                        <div class="mb-8">
                            <h1 class="text-4xl font-bold mb-2">Get <span class="amount-highlight"><span class="currency-symbol">$</span><span id="display-value">0</span></span> Towards <span id="display-type">AMAZON</span></h1>

                            <p class="text-gray-600 text-lg">Limited time offer - enter your email to claim now!</p>
                        </div>

                        <form id="giftCardForm" class="space-y-6">
                            <div>
                             <input type="email" id="email" name="email" class="w-full px-4 py-3 text-lg rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-transparent" placeholder="Email Address" required>   
                            </div>

                            <!-- Honeypot field for bots -->
                            <div class="contact-info">
                                <input type="text" name="contact_number" id="contact_number">
                            </div>

                            <!-- Hidden fields for tracking -->
                            <input type="hidden" name="funnel_type" id="funnel_type" value="amazon">
                            <input type="hidden" name="funnel_value" id="funnel_value" value="1000">
                            <input type="hidden" name="referrer_id" id="referrer_id" value="s1">
                            <input type="hidden" name="sub_id" id="sub_id" value="s2">
                            <input type="hidden" name="timestamp" id="timestamp" value="">

                            <div>
                                <button type="submit" class="w-full btn-gradient text-white font-medium py-4 px-4 rounded-xl flex items-center justify-center text-lg">
                                    <span>Next</span>
                                    <i class="fas fa-arrow-right ml-2"></i>
                                </button>

                                <div class="mt-6">
                                    <div class="flex flex-col items-center sm:flex-row sm:justify-center">
                                        <img src="https://taprain.com/images/funnels/trus2.png" alt="Trusted Reviews" class="h-9">
                                        <span class="text-gray-700 font-medium mt-2 sm:mt-0 sm:ml-2">2,000+ customers reviews</span>
                                    </div>
                                </div>

                                <p class="text-xs text-gray-500 mt-4 text-center">
                                    By continuing, you agree to receive promotional emails about similar offers which you can unsubscribe from at any time.
                                </p>
                            </div>
                        </form>
                    </div>

                    <!-- Right Column - Image and Social Proof (hidden on mobile) -->
                    <div class="relative bg-gradient-to-br from-pink-400 to-pink-500 p-8 md:p-10 flex flex-col justify-between hidden md:flex" id="right-column">
                        <div class="absolute top-3 right-3 bg-white bg-opacity-25 rounded-lg px-3 py-1.5 text-white text-sm font-medium" style="z-index:100;">
                            <i class="fas fa-fire text-yellow-300 mr-1"></i> Trending
                        </div>

                        <div class="flex-grow flex items-center justify-center mb-8">
                            <img id="giftcard-image" src="" alt="Gift Card" class="max-w-full max-h-52 rounded-lg shadow-lg">
                        </div>

                        <div class="space-y-4">
                            <div class="bg-white bg-opacity-25 rounded-lg p-4">
                                <div id="testimonial-carousel" class="testimonial-carousel">
                                    <!-- Testimonials will be dynamically inserted here -->
                                </div>
                            </div>

                            <div class="flex justify-between items-center">
                                <div>
                                    <div class="text-white text-opacity-90 text-sm font-medium">Spots remaining today:</div>
                                    <div class="text-white font-medium" id="spots-remaining">13/100</div>
                                </div>

                                <div class="w-2/3">
                                    <div class="progress-bar">
                                        <div class="progress-fill" id="spots-progress" style="width: 87%;"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Mobile Social Proof (shows only on mobile) -->
                    <div class="md:hidden p-6 bg-gradient-to-r from-pink-400 to-pink-500 rounded-b-xl" id="mobile-right-column">
                        <div class="bg-white bg-opacity-25 rounded-lg p-4 mb-4">
                            <div id="mobile-testimonial-carousel" class="testimonial-carousel">
                                <!-- Mobile testimonials will be inserted here -->
                            </div>
                        </div>

                        <div class="flex justify-between items-center">
                            <div>
                                <div class="text-white text-opacity-90 text-sm font-medium">Spots remaining today:</div>
                                <div class="text-white font-medium" id="mobile-spots-remaining">13/100</div>
                            </div>

                            <div class="w-2/3">
                                <div class="progress-bar">
                                    <div class="progress-fill" id="mobile-spots-progress" style="width: 87%;"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <div class="bg-gray-100 py-4">
        <div class="container mx-auto px-4">
            <div class="text-center text-xs text-gray-500">
                <p>This offer is not sponsored or endorsed by any brand. All trademarks belong to their respective owners.</p>
                <p class="mt-1">¬© 2025 Reward Wave. All rights reserved.</p>
            </div>
        </div>
    </div>

    <script>
        // Parse URL parameters
        function getUrlParam(param) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(param);
        }

        // Set the timestamp
        document.getElementById('timestamp').value = Date.now();

        // Set referrer ID (s1) and sub ID (s2) from URL
        document.getElementById('referrer_id').value = getUrlParam('s1') || '';
        document.getElementById('sub_id').value = getUrlParam('s2') || '';

        // Update funnelType and funnelValue if provided in URL
        const funnelType = getUrlParam('type') || 'amazon';
        document.getElementById('funnel_type').value = '1000';
        document.getElementById('display-type').textContent = funnelType.toUpperCase();
        document.getElementById('banner-type').textContent = funnelType.toUpperCase();
        document.title = `Get Your ${funnelType.toUpperCase()} Reward`;

        // Add theme class to body based on funnel type
        document.body.classList.add(`theme-${funnelType.toLowerCase()}`);

        // Update color theme based on funnel type
        function updateColorTheme(type) {
            const emailInput = document.getElementById('email');
            if (emailInput) {
                // Remove any existing focus ring classes
                emailInput.className = emailInput.className.replace(/focus:ring-[a-z]+-\d+/g, '');

                // Add appropriate focus ring color
                switch (type.toLowerCase()) {
                    case 'paypal':
                        emailInput.classList.add('focus:ring-blue-500');
                        break;
                    case 'tiktok':
                        emailInput.classList.add('focus:ring-red-500');
                        break;
                    case 'amazon':
                        emailInput.classList.add('focus:ring-yellow-500');
                        break;
                    case 'walmart':
                        emailInput.classList.add('focus:ring-blue-600');
                        break;
                    case 'target':
                        emailInput.classList.add('focus:ring-red-600');
                        break;
                    case 'bloxfruits':
                        emailInput.classList.add('focus:ring-green-500');
                        break;
                    case 'fortnite':
                        emailInput.classList.add('focus:ring-purple-500');
                        break;
                    case 'victoria':
                        emailInput.classList.add('focus:ring-pink-400');
                        break;
                    case 'zelle':
                        emailInput.classList.add('focus:ring-indigo-500');
                        break;
                    case 'brandy':
                        emailInput.classList.add('focus:ring-yellow-600');
                        break;
                    case 'steam':
                        emailInput.classList.add('focus:ring-blue-800');
                        break;
                    case 'apple':
                        emailInput.classList.add('focus:ring-gray-800');
                        break;
                    case 'ps5':
                        emailInput.classList.add('focus:ring-blue-500');
                        break;
                    case 'xbox':
                        emailInput.classList.add('focus:ring-green-600');
                        break;
                    case 'venmo':
                        emailInput.classList.add('focus:ring-blue-400');
                        break;
                    case 'minecoins':
                        emailInput.classList.add('focus:ring-green-500');
                        break;
                    case 'doordash':
                        emailInput.classList.add('focus:ring-red-500');
                        break;
                    case 'netflix':
                        emailInput.classList.add('focus:ring-red-600');
                        break;
                    case 'aldi':
                        emailInput.classList.add('focus:ring-blue-700');
                        break;
                    case 'marshalls':
                        emailInput.classList.add('focus:ring-red-600');
                        break;
                    case 'crumbl':
                        emailInput.classList.add('focus:ring-pink-300');
                        break;
                    case 'starbucks':
                        emailInput.classList.add('focus:ring-green-700');
                        break;
                    case 'lululemon':
                        emailInput.classList.add('focus:ring-red-400');
                        break;
                    case 'brawl':
                        emailInput.classList.add('focus:ring-blue-400');
                        break;
                    case 'jdsports':
                        emailInput.classList.add('focus:ring-black');
                        break;
                    case 'mcdonalds':
                        emailInput.classList.add('focus:ring-yellow-500');
                        break;
                    case 'roblox':
                        emailInput.classList.add('focus:ring-blue-500');
                        break;
                    case 'sephora':
                        emailInput.classList.add('focus:ring-purple-500');
                        break;
                    case 'cashapp':
                        emailInput.classList.add('focus:ring-green-500');
                        break;
                    default: // CASHAPP
                        emailInput.classList.add('focus:ring-pink-500');
                }
            }

            // Update top banner colors
            const topBanner = document.getElementById('top-banner');

            switch (type.toLowerCase()) {
                case 'paypal':
                    topBanner.className = 'bg-gradient-to-r from-blue-500 to-blue-600 py-3 text-white text-center font-medium';
                    break;
                case 'tiktok':
                    topBanner.className = 'bg-gradient-to-r from-red-500 to-blue-400 py-3 text-white text-center font-medium';
                    break;
                case 'amazon':
                    topBanner.className = 'bg-gradient-to-r from-yellow-500 to-yellow-600 py-3 text-white text-center font-medium';
                    break;
                case 'walmart':
                    topBanner.className = 'bg-gradient-to-r from-blue-600 to-blue-700 py-3 text-white text-center font-medium';
                    break;
                case 'target':
                    topBanner.className = 'bg-gradient-to-r from-red-600 to-red-700 py-3 text-white text-center font-medium';
                    break;
                case 'bloxfruits':
                    topBanner.className = 'bg-gradient-to-r from-green-500 to-green-600 py-3 text-white text-center font-medium';
                    break;
                case 'fortnite':
                    topBanner.className = 'bg-gradient-to-r from-purple-500 to-purple-600 py-3 text-white text-center font-medium';
                    break;
                case 'victoria':
                    topBanner.className = 'bg-gradient-to-r from-pink-400 to-pink-500 py-3 text-white text-center font-medium';
                    break;
                case 'zelle':
                    topBanner.className = 'bg-gradient-to-r from-indigo-500 to-indigo-600 py-3 text-white text-center font-medium';
                    break;
                case 'brandy':
                    topBanner.className = 'bg-gradient-to-r from-yellow-600 to-yellow-700 py-3 text-white text-center font-medium';
                    break;
                case 'steam':
                    topBanner.className = 'bg-gradient-to-r from-blue-800 to-blue-900 py-3 text-white text-center font-medium';
                    break;
                case 'apple':
                    topBanner.className = 'bg-gradient-to-r from-gray-800 to-gray-900 py-3 text-white text-center font-medium';
                    break;
                case 'ps5':
                    topBanner.className = 'bg-gradient-to-r from-blue-500 to-blue-600 py-3 text-white text-center font-medium';
                    break;
                case 'xbox':
                    topBanner.className = 'bg-gradient-to-r from-green-600 to-green-700 py-3 text-white text-center font-medium';
                    break;
                case 'venmo':
                    topBanner.className = 'bg-gradient-to-r from-blue-400 to-blue-500 py-3 text-white text-center font-medium';
                    break;
                case 'minecoins':
                    topBanner.className = 'bg-gradient-to-r from-green-500 to-green-600 py-3 text-white text-center font-medium';
                    break;
                case 'doordash':
                    topBanner.className = 'bg-gradient-to-r from-red-500 to-red-600 py-3 text-white text-center font-medium';
                    break;
                case 'netflix':
                    topBanner.className = 'bg-gradient-to-r from-red-600 to-red-700 py-3 text-white text-center font-medium';
                    break;
                case 'aldi':
                    topBanner.className = 'bg-gradient-to-r from-blue-700 to-blue-800 py-3 text-white text-center font-medium';
                    break;
                case 'marshalls':
                    topBanner.className = 'bg-gradient-to-r from-red-600 to-red-700 py-3 text-white text-center font-medium';
                    break;
                case 'crumbl':
                    topBanner.className = 'bg-gradient-to-r from-pink-300 to-pink-400 py-3 text-white text-center font-medium';
                    break;
                case 'starbucks':
                    topBanner.className = 'bg-gradient-to-r from-green-700 to-green-800 py-3 text-white text-center font-medium';
                    break;
                case 'lululemon':
                    topBanner.className = 'bg-gradient-to-r from-red-400 to-red-500 py-3 text-white text-center font-medium';
                    break;
                case 'brawl':
                    topBanner.className = 'bg-gradient-to-r from-blue-400 to-blue-500 py-3 text-white text-center font-medium';
                    break;
                case 'jdsports':
                    topBanner.className = 'bg-gradient-to-r from-gray-800 to-gray-900 py-3 text-white text-center font-medium';
                    break;
                case 'mcdonalds':
                    topBanner.className = 'bg-gradient-to-r from-red-500 to-yellow-500 py-3 text-white text-center font-medium';
                    break;
                case 'roblox':
                    topBanner.className = 'bg-gradient-to-r from-blue-500 to-blue-600 py-3 text-white text-center font-medium';
                    break;
                case 'sephora':
                    topBanner.className = 'bg-gradient-to-r from-purple-500 to-purple-600 py-3 text-white text-center font-medium';
                    break;
                case 'cashapp':
                    topBanner.className = 'bg-gradient-to-r from-green-500 to-green-600 py-3 text-white text-center font-medium';
                    break;
                default: // AMAZON
                    topBanner.className = 'bg-gradient-to-r from-pink-400 to-pink-500 py-3 text-white text-center font-medium';
            }

            // Update right column gradient
            const rightColumn = document.getElementById('right-column');
            const mobileRightColumn = document.getElementById('mobile-right-column');

            switch (type.toLowerCase()) {
                case 'paypal':
                    rightColumn.className = 'relative bg-gradient-to-br from-blue-500 to-blue-700 p-8 md:p-10 flex flex-col justify-between hidden md:flex';
                    mobileRightColumn.className = 'md:hidden p-6 bg-gradient-to-r from-blue-500 to-blue-700 rounded-b-xl';
                    break;
                case 'tiktok':
                    rightColumn.className = 'relative bg-gradient-to-br from-red-500 to-blue-400 p-8 md:p-10 flex flex-col justify-between hidden md:flex';
                    mobileRightColumn.className = 'md:hidden p-6 bg-gradient-to-r from-red-500 to-blue-400 rounded-b-xl';
                    break;
                case 'amazon':
                    rightColumn.className = 'relative bg-gradient-to-br from-yellow-500 to-yellow-600 p-8 md:p-10 flex flex-col justify-between hidden md:flex';
                    mobileRightColumn.className = 'md:hidden p-6 bg-gradient-to-r from-yellow-500 to-yellow-600 rounded-b-xl';
                    break;
                case 'walmart':
                    rightColumn.className = 'relative bg-gradient-to-br from-blue-600 to-blue-700 p-8 md:p-10 flex flex-col justify-between hidden md:flex';
                    mobileRightColumn.className = 'md:hidden p-6 bg-gradient-to-r from-blue-600 to-blue-700 rounded-b-xl';
                    break;
                case 'target':
                    rightColumn.className = 'relative bg-gradient-to-br from-red-600 to-red-700 p-8 md:p-10 flex flex-col justify-between hidden md:flex';
                    mobileRightColumn.className = 'md:hidden p-6 bg-gradient-to-r from-red-600 to-red-700 rounded-b-xl';
                    break;
                case 'bloxfruits':
                    rightColumn.className = 'relative bg-gradient-to-br from-green-500 to-green-600 p-8 md:p-10 flex flex-col justify-between hidden md:flex';
                    mobileRightColumn.className = 'md:hidden p-6 bg-gradient-to-r from-green-500 to-green-600 rounded-b-xl';
                    break;
                case 'fortnite':
                    rightColumn.className = 'relative bg-gradient-to-br from-purple-500 to-purple-600 p-8 md:p-10 flex flex-col justify-between hidden md:flex';
                    mobileRightColumn.className = 'md:hidden p-6 bg-gradient-to-r from-purple-500 to-purple-600 rounded-b-xl';
                    break;
                case 'victoria':
                    rightColumn.className = 'relative bg-gradient-to-br from-pink-400 to-pink-500 p-8 md:p-10 flex flex-col justify-between hidden md:flex';
                    mobileRightColumn.className = 'md:hidden p-6 bg-gradient-to-r from-pink-400 to-pink-500 rounded-b-xl';
                    break;
                case 'zelle':
                    rightColumn.className = 'relative bg-gradient-to-br from-indigo-500 to-indigo-600 p-8 md:p-10 flex flex-col justify-between hidden md:flex';
                    mobileRightColumn.className = 'md:hidden p-6 bg-gradient-to-r from-indigo-500 to-indigo-600 rounded-b-xl';
                    break;
                case 'brandy':
                    rightColumn.className = 'relative bg-gradient-to-br from-yellow-600 to-yellow-700 p-8 md:p-10 flex flex-col justify-between hidden md:flex';
                    mobileRightColumn.className = 'md:hidden p-6 bg-gradient-to-r from-yellow-600 to-yellow-700 rounded-b-xl';
                    break;
                case 'steam':
                    rightColumn.className = 'relative bg-gradient-to-br from-blue-800 to-blue-900 p-8 md:p-10 flex flex-col justify-between hidden md:flex';
                    mobileRightColumn.className = 'md:hidden p-6 bg-gradient-to-r from-blue-800 to-blue-900 rounded-b-xl';
                    break;
                case 'apple':
                    rightColumn.className = 'relative bg-gradient-to-br from-gray-800 to-gray-900 p-8 md:p-10 flex flex-col justify-between hidden md:flex';
                    mobileRightColumn.className = 'md:hidden p-6 bg-gradient-to-r from-gray-800 to-gray-900 rounded-b-xl';
                    break;
                case 'ps5':
                    rightColumn.className = 'relative bg-gradient-to-br from-blue-500 to-blue-600 p-8 md:p-10 flex flex-col justify-between hidden md:flex';
                    mobileRightColumn.className = 'md:hidden p-6 bg-gradient-to-r from-blue-500 to-blue-600 rounded-b-xl';
                    break;
                case 'xbox':
                    rightColumn.className = 'relative bg-gradient-to-br from-green-600 to-green-700 p-8 md:p-10 flex flex-col justify-between hidden md:flex';
                    mobileRightColumn.className = 'md:hidden p-6 bg-gradient-to-r from-green-600 to-green-700 rounded-b-xl';
                    break;
                case 'venmo':
                    rightColumn.className = 'relative bg-gradient-to-br from-blue-400 to-blue-500 p-8 md:p-10 flex flex-col justify-between hidden md:flex';
                    mobileRightColumn.className = 'md:hidden p-6 bg-gradient-to-r from-blue-400 to-blue-500 rounded-b-xl';
                    break;
                case 'minecoins':
                    rightColumn.className = 'relative bg-gradient-to-br from-green-500 to-green-600 p-8 md:p-10 flex flex-col justify-between hidden md:flex';
                    mobileRightColumn.className = 'md:hidden p-6 bg-gradient-to-r from-green-500 to-green-600 rounded-b-xl';
                    break;
                case 'doordash':
                    rightColumn.className = 'relative bg-gradient-to-br from-red-500 to-red-600 p-8 md:p-10 flex flex-col justify-between hidden md:flex';
                    mobileRightColumn.className = 'md:hidden p-6 bg-gradient-to-r from-red-500 to-red-600 rounded-b-xl';
                    break;
                case 'netflix':
                    rightColumn.className = 'relative bg-gradient-to-br from-red-600 to-red-700 p-8 md:p-10 flex flex-col justify-between hidden md:flex';
                    mobileRightColumn.className = 'md:hidden p-6 bg-gradient-to-r from-red-600 to-red-700 rounded-b-xl';
                    break;
                case 'aldi':
                    rightColumn.className = 'relative bg-gradient-to-br from-blue-700 to-blue-800 p-8 md:p-10 flex flex-col justify-between hidden md:flex';
                    mobileRightColumn.className = 'md:hidden p-6 bg-gradient-to-r from-blue-700 to-blue-800 rounded-b-xl';
                    break;
                case 'marshalls':
                    rightColumn.className = 'relative bg-gradient-to-br from-red-600 to-red-700 p-8 md:p-10 flex flex-col justify-between hidden md:flex';
                    mobileRightColumn.className = 'md:hidden p-6 bg-gradient-to-r from-red-600 to-red-700 rounded-b-xl';
                    break;
                case 'crumbl':
                    rightColumn.className = 'relative bg-gradient-to-br from-pink-300 to-pink-400 p-8 md:p-10 flex flex-col justify-between hidden md:flex';
                    mobileRightColumn.className = 'md:hidden p-6 bg-gradient-to-r from-pink-300 to-pink-400 rounded-b-xl';
                    break;
                case 'starbucks':
                    rightColumn.className = 'relative bg-gradient-to-br from-green-700 to-green-800 p-8 md:p-10 flex flex-col justify-between hidden md:flex';
                    mobileRightColumn.className = 'md:hidden p-6 bg-gradient-to-r from-green-700 to-green-800 rounded-b-xl';
                    break;
                case 'lululemon':
                    rightColumn.className = 'relative bg-gradient-to-br from-red-400 to-red-500 p-8 md:p-10 flex flex-col justify-between hidden md:flex';
                    mobileRightColumn.className = 'md:hidden p-6 bg-gradient-to-r from-red-400 to-red-500 rounded-b-xl';
                    break;
                case 'brawl':
                    rightColumn.className = 'relative bg-gradient-to-br from-blue-400 to-blue-500 p-8 md:p-10 flex flex-col justify-between hidden md:flex';
                    mobileRightColumn.className = 'md:hidden p-6 bg-gradient-to-r from-blue-400 to-blue-500 rounded-b-xl';
                    break;
                case 'jdsports':
                    rightColumn.className = 'relative bg-gradient-to-br from-gray-800 to-gray-900 p-8 md:p-10 flex flex-col justify-between hidden md:flex';
                    mobileRightColumn.className = 'md:hidden p-6 bg-gradient-to-r from-gray-800 to-gray-900 rounded-b-xl';
                    break;
                case 'mcdonalds':
                    rightColumn.className = 'relative bg-gradient-to-br from-red-500 to-yellow-500 p-8 md:p-10 flex flex-col justify-between hidden md:flex';
                    mobileRightColumn.className = 'md:hidden p-6 bg-gradient-to-r from-red-500 to-yellow-500 rounded-b-xl';
                    break;
                case 'roblox':
                    rightColumn.className = 'relative bg-gradient-to-br from-blue-500 to-blue-600 p-8 md:p-10 flex flex-col justify-between hidden md:flex';
                    mobileRightColumn.className = 'md:hidden p-6 bg-gradient-to-r from-blue-500 to-blue-600 rounded-b-xl';
                    break;
                case 'sephora':
                    rightColumn.className = 'relative bg-gradient-to-br from-purple-500 to-purple-600 p-8 md:p-10 flex flex-col justify-between hidden md:flex';
                    mobileRightColumn.className = 'md:hidden p-6 bg-gradient-to-r from-purple-500 to-purple-600 rounded-b-xl';
                    break;
                case 'cashapp':
                    rightColumn.className = 'relative bg-gradient-to-br from-green-500 to-green-600 p-8 md:p-10 flex flex-col justify-between hidden md:flex';
                    mobileRightColumn.className = 'md:hidden p-6 bg-gradient-to-r from-green-500 to-green-600 rounded-b-xl';
                    break;
                default: // AMAZON
                    rightColumn.className = 'relative bg-gradient-to-br from-pink-400 to-pink-500 p-8 md:p-10 flex flex-col justify-between hidden md:flex';
                    mobileRightColumn.className = 'md:hidden p-6 bg-gradient-to-r from-pink-400 to-pink-500 rounded-b-xl';
            }
        }

        // Call the function to update theme colors
        updateColorTheme(funnelType);

        const funnelValue = getUrlParam('value') || '1000';
        document.getElementById('funnel_value').value = funnelValue;
        document.getElementById('display-value').textContent = funnelValue;
        document.getElementById('banner-value').textContent = funnelValue;

        // Set gift card image based on funnel type for both desktop and mobile
        const giftcardImage = document.getElementById('giftcard-image');
        const mobileGiftcardImage = document.getElementById('mobile-giftcard-image');

        // Map of funnel types to images
        const imageMap = {
            'shein': 'https://taprain.com/images/funnels/shein.png',
            'sephora': 'https://taprain.com/images/funnels/sephora.png',
            'paypal': 'https://taprain.com/images/funnels/paypal.png',
            'tiktok': 'https://taprain.com/images/funnels/tiktok.png',
            'roblox': 'https://taprain.com/images/funnels/roblox.png',
            'jdsports': 'https://taprain.com/images/funnels/jdsports.png',
            'mcdonalds': 'https://taprain.com/images/funnels/mcdonalds.png',
            'amazon': 'https://taprain.com/images/funnels/amazon.png',
            'fortnite': 'https://taprain.com/images/funnels/fortnite.png',
            'walmart': 'https://taprain.com/images/funnels/walmart.png',
            'target': 'https://taprain.com/images/funnels/target.png',
            'bloxfruits': 'https://taprain.com/images/funnels/bloxfruits.png',
            'starbucks': 'https://taprain.com/images/funnels/starbucks.png',
            'victoria': 'https://taprain.com/images/funnels/victoria.png',
            'lululemon': 'https://taprain.com/images/funnels/lululemon.png',
            'brawl': 'https://taprain.com/images/funnels/brawl.png',
            'cashapp': 'https://taprain.com/images/funnels/cashapp.png',
            'zelle': 'https://taprain.com/images/funnels/zelle.png',
            'brandy': 'https://taprain.com/images/funnels/brandy.png',
            'steam': 'https://taprain.com/images/funnels/steam.png',
            'apple': 'https://taprain.com/images/funnels/apple.png',
            'playstation': 'https://taprain.com/images/funnels/playstation.png',
            'xbox': 'https://taprain.com/images/funnels/xbox.png',
            'venmo': 'https://taprain.com/images/funnels/venmo.png',
            'minecoins': 'https://taprain.com/images/funnels/minecraft.png',
            'doordash': 'https://taprain.com/images/funnels/doordash.png',
            'netflix': 'https://taprain.com/images/funnels/netflix.png',
            'aldi': 'https://taprain.com/images/funnels/aldi.jpg',
            'marshalls': 'https://taprain.com/images/funnels/marshalls.png',
            'crumbl': 'https://taprain.com/images/funnels/crumbl.jpg'
        };

        // Use the appropriate image or fallback to a placeholder
        let imageUrl = imageMap[funnelType.toLowerCase()] || `/api/placeholder/400/300/${funnelType}`;
        giftcardImage.src = imageUrl;
        giftcardImage.alt = `${funnelType.toUpperCase()} Gift Card`;
        mobileGiftcardImage.src = imageUrl;
        mobileGiftcardImage.alt = `${funnelType.toUpperCase()} Gift Card`;

        // Enhanced dynamic testimonial content
        const testimonials = [{
                name: "Ashley K.",
                text: `Just received my gift card! So excited for my shopping spree üòç`,
                rating: 5,
                location: "New York",
                avatar: "https://randomuser.me/api/portraits/women/65.jpg"
            },
            {
                name: "Michael T.",
                text: `The process was so easy! Got my ${funnelValue} reward in less than 2 days!`,
                rating: 5,
                location: "Chicago",
                avatar: "https://randomuser.me/api/portraits/men/32.jpg"
            },
            {
                name: "Emma S.",
                text: `Can't believe this actually worked. Already spent half my gift card! üõçÔ∏è`,
                rating: 5,
                location: "Los Angeles",
                avatar: "https://randomuser.me/api/portraits/women/44.jpg"
            },
            {
                name: "Tyler W.",
                text: `Super quick verification. Got my code emailed within 24 hours.`,
                rating: 5,
                location: "Miami",
                avatar: "https://randomuser.me/api/portraits/men/15.jpg"
            },
            {
                name: "Sarah J.",
                text: `This came at the perfect time! Just ordered everything on my wishlist. Thanks!`,
                rating: 5,
                location: "Seattle",
                avatar: "https://randomuser.me/api/portraits/women/22.jpg"
            },
            {
                name: "David R.",
                text: `I was skeptical at first but my reward came through. Totally legit.`,
                rating: 5,
                location: "Austin",
                avatar: "https://randomuser.me/api/portraits/men/67.jpg"
            },
            {
                name: "Jessica M.",
                text: `Best surprise ever! Already planning my next shopping haul üõí`,
                rating: 5,
                location: "Denver",
                avatar: "https://randomuser.me/api/portraits/women/33.jpg"
            }
        ];

        // Create testimonial slide HTML
        function createTestimonialHTML(testimonial) {
            return `
                <div class="flex items-start space-x-3">
                    <div class="avatar-circle flex-shrink-0">
                        <img src="${testimonial.avatar}" alt="${testimonial.name}" onerror="this.src='https://ui-avatars.com/api/?name=${encodeURIComponent(testimonial.name)}&background=random'">
                    </div>
                    <div>
                        <div class="flex justify-between">
                            <span class="text-white font-medium">${testimonial.name}</span>
                            <span class="text-white text-opacity-75 text-xs">${testimonial.location}</span>
                        </div>
                        <p class="text-white text-opacity-90 text-sm">${testimonial.text}</p>
                        <div class="flex mt-1">
                            ${Array(testimonial.rating).fill('<i class="fas fa-star text-yellow-300 text-xs"></i>').join('')}
                        </div>
                    </div>
                </div>
            `;
        }

        // Initialize testimonial carousels
        function initTestimonialCarousel() {
            const carouselContainer = document.getElementById('testimonial-carousel');
            const mobileCarouselContainer = document.getElementById('mobile-testimonial-carousel');

            // Clear existing content
            carouselContainer.innerHTML = '';
            mobileCarouselContainer.innerHTML = '';

            // Create slides for each testimonial
            testimonials.forEach((testimonial, index) => {
                const slide = document.createElement('div');
                slide.className = `testimonial-slide ${index === 0 ? 'active' : ''}`;
                slide.innerHTML = createTestimonialHTML(testimonial);
                carouselContainer.appendChild(slide);

                // Create duplicate for mobile
                const mobileSlide = document.createElement('div');
                mobileSlide.className = `testimonial-slide ${index === 0 ? 'active' : ''}`;
                mobileSlide.innerHTML = createTestimonialHTML(testimonial);
                mobileCarouselContainer.appendChild(mobileSlide);
            });
        }

        // Auto-rotate testimonials
        function rotateTestimonials() {
            const carousels = [
                document.getElementById('testimonial-carousel'),
                document.getElementById('mobile-testimonial-carousel')
            ];

            carousels.forEach(carousel => {
                if (!carousel) return;

                const slides = Array.from(carousel.getElementsByClassName('testimonial-slide'));
                if (slides.length === 0) return;

                // Find current active slide
                const activeIndex = slides.findIndex(slide => slide.classList.contains('active'));
                const nextIndex = (activeIndex + 1) % slides.length;

                // Move current active slide to prev state
                slides[activeIndex].classList.remove('active');
                slides[activeIndex].classList.add('prev');

                // Make next slide active
                slides[nextIndex].classList.remove('prev');
                slides[nextIndex].classList.add('active');

                // Reset previous slide after animation completes
                setTimeout(() => {
                    slides[activeIndex].classList.remove('prev');
                }, 700);
            });
        }

        // Dynamic active users
        function updateActiveUsers() {
            const baseUsers = 300;
            const randomUsers = Math.floor(Math.random() * 100);
            document.getElementById('activeUsers').textContent = baseUsers + randomUsers;
        }

        // Dynamic spots remaining
        function updateSpotsRemaining() {
            // Generate a random number of spots between 5 and 20
            const spotsLeft = Math.floor(Math.random() * 16) + 5;
            const totalSpots = 100;
            const percentFilled = 100 - (spotsLeft / totalSpots * 100);

            document.getElementById('spots-remaining').textContent = `${spotsLeft}/${totalSpots}`;
            document.getElementById('spots-progress').style.width = `${percentFilled}%`;

            // Update mobile view as well
            if (document.getElementById('mobile-spots-remaining')) {
                document.getElementById('mobile-spots-remaining').textContent = `${spotsLeft}/${totalSpots}`;
                document.getElementById('mobile-spots-progress').style.width = `${percentFilled}%`;
            }
        }

        // Initialize testimonials
        initTestimonialCarousel();

        // Update dynamic values on page load
        updateActiveUsers();
        updateSpotsRemaining();

        // Update active users and spots remaining periodically
        setInterval(updateActiveUsers, 7000);
        setInterval(updateSpotsRemaining, 15000);

        // Rotate testimonials every 4 seconds
        setInterval(rotateTestimonials, 4000);

        // Form submission
        document.getElementById('giftCardForm').addEventListener('submit', async function(e) {
            e.preventDefault();

            // Get email value
            const email = document.getElementById('email').value;

            // Check if honeypot field is filled (bot detection)
            if (document.getElementById('contact_number').value !== '') {
                console.log("Bot detected");
                return false;
            }

            // Disable submit button and show loading state
            const submitBtn = this.querySelector('button[type="submit"]');
            const originalText = submitBtn.innerHTML;
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i> Processing...';

            // Skip sending email, go directly to activate.html
            setTimeout(() => {
            window.location.href = './funnel/activate.html';
            submitBtn.disabled = false;
            submitBtn.innerHTML = originalText;
           }, 1000); // waits 1 second before redirecting
          }); //

        /**
         * BULLETPROOF COUNTER SOLUTION
         * This implementation guarantees absolutely zero movement
         * by using a completely different approach
         */

        // Run this as soon as possible
        document.addEventListener('DOMContentLoaded', function() {
            // STEP 1: Immediately replace the counters with pre-filled placeholders

            // All values are pre-rendered with the final width
            const finalValue = document.getElementById('funnel_value')  .value || '1000';

            // APPROACH: Replace the counter with a container that has:
            // 1. A hidden span with the final value (sets the width)
            // 2. An absolutely positioned span that will animate (no layout impact)

            // Replace heading counter
            const displayValue = document.getElementById('display-value');
            if (displayValue) {
                // Create container with exact necessary dimensions
                const container = document.createElement('span');
                container.style.position = 'relative';
                container.style.display = 'inline-block';
                container.style.overflow = 'hidden'; // Critical for absolute positioning

                // This span sets the width but is invisible
                const widthSetter = document.createElement('span');
                widthSetter.textContent = finalValue;
                widthSetter.style.visibility = 'hidden';
                widthSetter.style.pointerEvents = 'none';

                // This span will show the animation but has zero layout impact
                const animator = document.createElement('span');
                animator.id = 'display-value-animator';
                animator.textContent = '0';
                animator.style.position = 'absolute';
                animator.style.top = '0';
                animator.style.left = '0';
                animator.style.width = '100%';
                animator.style.textAlign = 'center';

                // Assemble the structure
                container.appendChild(widthSetter);
                container.appendChild(animator);

                // Replace the original element
                displayValue.parentNode.replaceChild(container, displayValue);
            }

            // Replace banner counter with same approach
            const bannerValue = document.getElementById('banner-value');
            if (bannerValue) {
                // Create container with exact necessary dimensions
                const container = document.createElement('span');
                container.style.position = 'relative';
                container.style.display = 'inline-block';
                container.style.overflow = 'hidden';
                // Get computed style to match text alignment
                const computedStyle = window.getComputedStyle(bannerValue);
                container.style.verticalAlign = 'middle'; // Fix vertical alignment

                // This span sets the width but is invisible
                const widthSetter = document.createElement('span');
                widthSetter.textContent = document.getElementById('funnel_value')  .value || '1000';
                widthSetter.style.visibility = 'hidden';
                widthSetter.style.pointerEvents = 'none';
                widthSetter.style.display = 'inline-block'; // Ensure proper sizing

                // This span will show the animation but has zero layout impact
                const animator = document.createElement('span');
                animator.id = 'banner-value-animator';
                animator.textContent = '0';
                animator.style.position = 'absolute';
                animator.style.top = '0'; // Align to top
                animator.style.left = '0';
                animator.style.right = '0'; // Ensure it fills the container
                animator.style.bottom = '0'; // Ensure it fills the container
                animator.style.display = 'flex'; // Use flexbox for perfect centering
                animator.style.alignItems = 'center'; // Center vertically
                animator.style.justifyContent = 'center'; // Center horizontally
                animator.style.textAlign = 'center';

                // Assemble the structure
                container.appendChild(widthSetter);
                container.appendChild(animator);

                // Replace the original element
                bannerValue.parentNode.replaceChild(container, bannerValue);
            }
        });

        // STEP 2: Define the new animation function
        // This function only changes the content of absolutely positioned elements
        function absoluteZeroMovementCounter(targetElement, finalValue, duration = 1500) {
            const element = document.getElementById(targetElement);
            if (!element) return;

            let startTime;
            const startValue = 0;

            function updateCounter(timestamp) {
                if (!startTime) startTime = timestamp;

                const progress = Math.min((timestamp - startTime) / duration, 1);
                const easedProgress = 1 - Math.pow(1 - progress, 3); // Cubic ease-out
                const currentValue = Math.floor(startValue + (finalValue - startValue) * easedProgress);

                element.textContent = currentValue;

                if (progress < 1) {
                    requestAnimationFrame(updateCounter);
                }
            }

            requestAnimationFrame(updateCounter);
        }

        // STEP 3: Animation trigger function
        function triggerSafeAnimations() {
            // Wait for fonts to load to ensure accurate width calculation
            if ('fonts' in document) {
                document.fonts.ready.then(startSafeAnimations);
            } else {
                // Fallback if fonts API is not available
                setTimeout(startSafeAnimations, 300);
            }
        }

        function startSafeAnimations() {
            const funnelValue = document.getElementById('funnel_value')  .value || '1000';
            const isMobile = window.innerWidth < 768;
            const duration = isMobile ? 1000 : 1500;

            // Animate the headline
            const headline = document.querySelector('h1');
            if (headline) {
                headline.style.opacity = '0';
                headline.style.transition = 'opacity 0.5s ease';
                setTimeout(() => {
                    headline.style.opacity = '1';
                    // Start counter animations only after headline is visible
                    setTimeout(() => {
                        absoluteZeroMovementCounter('display-value-animator', parseInt(funnelValue), duration);
                        absoluteZeroMovementCounter('banner-value-animator', parseInt(funnelValue), duration);
                    }, 200);
                }, 300);
            } else {
                // If no headline, start counters directly
                absoluteZeroMovementCounter('display-value-animator', parseInt(funnelValue), duration);
                absoluteZeroMovementCounter('banner-value-animator', parseInt(funnelValue), duration);
            }

            // Other animations for form, images, etc. can be added here
            // but are not included to focus on fixing the counter issue
        }

        // Initialize everything once the page is loaded
        if (!window.hasInitialized) {
            window.hasInitialized = true;

            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', triggerSafeAnimations);
            } else {
                triggerSafeAnimations();
            }
        }
    </script>

    <script>
        // Centralized currency handler for the email page
        const currencyHandler = {
            // Default values
            state: {
                symbol: '$',
                code: 'USD',
                country: 'US',
                initialized: false
            },

            // Initialize currency detection and replacement
            init: function() {
                console.log("Initializing currency handler");

                // First try to get currency from meta tags (server-side detection)
                const symbolMeta = document.querySelector('meta[name="currency-symbol"]');
                const codeMeta = document.querySelector('meta[name="currency-code"]');
                const countryMeta = document.querySelector('meta[name="currency-country"]');

                if (symbolMeta && symbolMeta.content) {
                    this.state.symbol = symbolMeta.content;
                    this.state.code = codeMeta  .content || 'USD';
                    this.state.country = countryMeta  .content || 'US';
                    this.state.initialized = true;
                    console.log(`Currency from meta tags: ${this.state.symbol} (${this.state.code})`);
                }
                // Next, try to get from body data attributes
                else if (document.body.hasAttribute('data-currency')) {
                    this.state.symbol = document.body.getAttribute('data-currency') || '$';
                    this.state.code = document.body.getAttribute('data-currency-code') || 'USD';
                    this.state.country = document.body.getAttribute('data-country') || 'US';
                    this.state.initialized = true;
                    console.log(`Currency from body attributes: ${this.state.symbol} (${this.state.code})`);
                }
                // Fall back to URL parameters if present
                else if (new URLSearchParams(window.location.search).get('currency_symbol')) {
                    this.state.symbol = new URLSearchParams(window.location.search).get('currency_symbol') || '$';
                    this.state.code = new URLSearchParams(window.location.search).get('currency_code') || 'USD';
                    this.state.country = new URLSearchParams(window.location.search).get('country') || 'US';
                    this.state.initialized = true;
                    console.log(`Currency from URL params: ${this.state.symbol} (${this.state.code})`);
                }

                // Set data attributes on the body for other scripts to use
                document.body.setAttribute('data-currency', this.state.symbol);
                document.body.setAttribute('data-currency-code', this.state.code);
                document.body.setAttribute('data-country', this.state.country);

                // Update all currency symbols in the document
                this.updateCurrencySymbols();

                // Schedule another update after any animations might have completed
                setTimeout(() => this.updateCurrencySymbols(), 2000);

                return this.state;
            },

            // Update all currency symbols in the document
            updateCurrencySymbols: function() {
                // Skip if using USD (default)
                if (this.state.symbol === '$') {
                    return;
                }

                // Update all elements with the currency-symbol class
                document.querySelectorAll('.currency-symbol').forEach(el => {
                    el.textContent = this.state.symbol;
                });

                // Make sure counter animations work with the correct symbol
                // This needs to hook into the existing counter animation
                this.updateCounterAnimations();
            },

            // Special handling for counter animations
            updateCounterAnimations: function() {
                // Fix the display-value-animator and banner-value-animator
                // These are created by the existing script
                const displayAnimator = document.getElementById('display-value-animator');
                const bannerAnimator = document.getElementById('banner-value-animator');

                // If the animators haven't been created yet, try again later
                if (!displayAnimator && !bannerAnimator) {
                    setTimeout(() => this.updateCounterAnimations(), 500);
                    return;
                }

                // Fix parent containers of animators if they exist
                // This ensures the currency symbol is properly placed
                if (displayAnimator && displayAnimator.parentElement) {
                    const parent = displayAnimator.parentElement.parentElement;
                    if (parent && parent.tagName === 'SPAN' && parent.classList.contains('amount-highlight')) {
                        const currencyElement = parent.querySelector('.currency-symbol');
                        if (currencyElement) {
                            currencyElement.textContent = this.state.symbol;
                        } else {
                            // If somehow there's no currency element, create one
                            const span = document.createElement('span');
                            span.className = 'currency-symbol';
                            span.textContent = this.state.symbol;
                            parent.insertBefore(span, parent.firstChild);
                        }
                    }
                }

                // Same for banner animator
                if (bannerAnimator && bannerAnimator.parentElement) {
                    const parent = bannerAnimator.parentElement.parentElement;
                    if (parent) {
                        const currencyElement = parent.querySelector('.currency-symbol');
                        if (currencyElement) {
                            currencyElement.textContent = this.state.symbol;
                        }
                    }
                }
            }
        };

        // Initialize the currency handler when the DOM is ready
        document.addEventListener('DOMContentLoaded', function() {
            currencyHandler.init();
        });

        // Also hook into the counter animation trigger
        const originalStartSafeAnimations = window.startSafeAnimations;
        if (typeof originalStartSafeAnimations === 'function') {
            window.startSafeAnimations = function() {
                // Call the original function
                originalStartSafeAnimations();

                // After counters are initialized, update currency symbols
                setTimeout(() => {
                    currencyHandler.updateCurrencySymbols();
                }, 200);
            };
        }
    </script>
    <script defer src="https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015" integrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==" data-cf-beacon='{"rayId":"954684cbea89d7a5","version":"2025.6.2","r":1,"token":"b7683189cc244445887bd86330ce05cc","serverTiming":{"name":{"cfExtPri":true,"cfEdge":true,"cfOrigin":true,"cfL4":true,"cfSpeedBrain":true,"cfCacheStatus":true}}}'
        crossorigin="anonymous"></script>
</body>
</html> 